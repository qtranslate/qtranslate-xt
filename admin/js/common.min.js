function qtranxj_get_cookie(n){for(var t=document.cookie.split(";"),e=0;e<t.length;++e){var a=t[e].split("=");if(a[0].trim()==n&&!(t.length<2))return a[1].trim()}return""}function qtranxj_ce(n,t,e,a){var i=document.createElement(n);if(t)for(var s in t)i[s]=t[s];return e&&(a&&e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)),i}qtranxj_get_split_blocks=function(n){return n.xsplit(/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\]|\{:[a-z]{2}\}|\{:\})/gi)},qtranxj_split=function(n){var t=qtranxj_get_split_blocks(n);return qtranxj_split_blocks(t)},qtranxj_split_blocks=function(n){var t=new Object;for(var e in qTranslateConfig.language_config)t[e]="";if(!n||!n.length)return t;if(1==n.length){var a=n[0];for(var e in qTranslateConfig.language_config)t[e]+=a;return t}for(var i,s=/<!--:([a-z]{2})-->/gi,o=/\[:([a-z]{2})\]/gi,r=/\{:([a-z]{2})\}/gi,l=(e=!1,0);l<n.length;++l){if((a=n[l]).length)if(i=s.exec(a),s.lastIndex=0,null==i)if(i=o.exec(a),o.lastIndex=0,null==i)if(i=r.exec(a),r.lastIndex=0,null==i)if("\x3c!--:--\x3e"!=a&&"[:]"!=a&&"{:}"!=a)if(e)t[e]?t[e]+=a:t[e]=a,e=!1;else for(var c in t)t[c]+=a;else e=!1;else e=i[1];else e=i[1];else e=i[1]}return t},String.prototype.xsplit=function(n){if(3==="a~b".split(/(~)/).length)return this.split(n);n.global||(n=new RegExp(n.source,"g"+(n.ignoreCase?"i":"")));for(var t,e=0,a=[];null!=(t=n.exec(this));)a.push(this.slice(e,t.index)),1<t.length&&a.push(t[1]),e=n.lastIndex;return e<this.length&&a.push(this.slice(e)),e==this.length&&a.push(""),a},function(b){qTranslateConfig.js.get_qtx=function(){return qTranslateConfig.qtx},qTranslateConfig.qtx||(qTranslateConfig.qtx=new function(n){var h=this;this.getLanguages=function(){return qTranslateConfig.language_config},this.getFlagLocation=function(){return qTranslateConfig.flag_location},this.isLanguageEnabled=function(n){return!!qTranslateConfig.language_config[n]};var g=function(n){document.cookie="qtrans_edit_language="+n};qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&this.isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,this.isLanguageEnabled(qTranslateConfig.activeLanguage)?g(qTranslateConfig.activeLanguage):qTranslateConfig.LSB=!1)):(qTranslateConfig.activeLanguage=qTranslateConfig.language,g(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};var C={};this.hasContentHook=function(n){return C[n]},this.addContentHook=function(n,t,e){if(!n)return!1;switch(n.tagName){case"TEXTAREA":break;case"INPUT":switch(n.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!e){if(!n.name)return!1;e=n.name}if(n.id){if(C[n.id]){if(b.contains(document,n))return C[n.id];h.removeContentHook(n)}}else if(C[e])for(var a=0;++a,n.id=e+a,C[n.id];);else n.id=e;n.className+=" qtranxs-translatable";var i,s=C[n.id]={};if(s.name=e,s.contentField=n,s.lang=qTranslateConfig.activeLanguage,t)switch(t){case"slug":i="qtranslate-slugs[";break;case"term":i="qtranslate-terms[";break;default:i="qtranslate-fields["}else t="[",i="qtranslate-fields[";s.encode=t;var o,r,l,c=s.name.indexOf("[");if(c<0)o=i+s.name+"]";else if(o=i+s.name.substring(0,c)+"]",s.name.lastIndexOf("[]")<0)o+=s.name.substring(c);else{var g=s.name.length-2;c<g&&(o+=s.name.substring(c,g)),r="[]"}if(s.fields={},!qTranslateConfig.RAW)for(var f in l=qtranxj_split(n.value),n.value=l[s.lang],l){var u=o+"["+f+"]";r&&(u+=r);var d=qtranxj_ce("input",{name:u,type:"hidden",className:"hidden",value:l[f]});s.fields[f]=d,n.parentNode.insertBefore(d,n)}switch(t){case"slug":case"term":qTranslateConfig.RAW&&(l=qtranxj_split(n.value)),s.sepfield=qtranxj_ce("input",{name:o+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:l[qTranslateConfig.default_language]});break;default:qTranslateConfig.RAW||(s.sepfield=qtranxj_ce("input",{name:o+"[qtranslate-separator]",type:"hidden",className:"hidden",value:t}))}return s.sepfield&&n.parentNode.insertBefore(s.sepfield,n),s},this.addContentHookC=function(n){return h.addContentHook(n,"[")},this.addContentHookB=function(n){return h.addContentHook(n,"[")},this.addContentHookById=function(n,t,e){return h.addContentHook(document.getElementById(n),t,e)},this.addContentHookByIdName=function(n){var t;switch(n[0]){case"<":case"[":t=n.substring(0,1),n=n.substring(1)}return h.addContentHookById(n,t)},this.addContentHookByIdC=function(n){return h.addContentHookById(n,"[")},this.addContentHookByIdB=function(n){return h.addContentHookById(n,"[")},this.addContentHooks=function(n,t,e){for(var a=0;a<n.length;++a){var i=n[a];h.addContentHook(i,t,e)}};this.addContentHooksByClass=function(n,t){var e;0!=n.indexOf("<")&&0!=n.indexOf("[")||(e=n.substring(0,1),n=n.substring(1)),function(n,t,e){t||(t=document);var a=t.getElementsByClassName(n);h.addContentHooks(a,e)}(n,t,e)},this.addContentHooksByTagInClass=function(n,t,e){for(var a=e.getElementsByClassName(n),i=0;i<a.length;++i){var s=a[i].getElementsByTagName(t);h.addContentHooks(s)}};var e=function(n){if(!n)return!1;n.sepfield&&b(n.sepfield).remove();var t={};for(var e in n.fields){var a=n.fields[e];t[e]=a.value,b(a).remove()}return b(n.contentField).removeClass("qtranxs-translatable"),delete C[n.contentField.id],t};this.removeContentHook=function(n){if(!n||!n.id||!C[n.id])return!1;var t=C[n.id];return e(t),b(n).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(n){if(!n||!n.id)return!1;var t=C[n.id];return t&&e(t),h.addContentHook(n)};var a=function(n){if(n[qTranslateConfig.language])return"("+qTranslateConfig.language+") "+n[qTranslateConfig.language];if(n[qTranslateConfig.default_language])return"("+qTranslateConfig.default_language+") "+n[qTranslateConfig.default_language];for(var t in n)if(n[t])return"("+t+") "+n[t];return""},s=function(n){var t=null;for(var e in n)n[e]||(t||(t=a(n)),n[e]=t)},f=[],i=function(n){if(!n.nodeValue)return 0;var t=qtranxj_get_split_blocks(n.nodeValue);if(!t||!t.length||1==t.length)return 0;var e={};return e.nd=n,e.contents=qtranxj_split_blocks(t),s(e.contents),n.nodeValue=e.contents[qTranslateConfig.activeLanguage],f.push(e),1},u=[],o=function(n,t){if(!n.hasAttribute(t))return 0;var e=n.getAttribute(t),a=qtranxj_get_split_blocks(e);if(!a||!a.length||1==a.length)return 0;var i={};return i.nd=n,i.attr=t,i.contents=qtranxj_split_blocks(a),s(i.contents),n.setAttribute(t,i.contents[qTranslateConfig.activeLanguage]),u.push(i),1};this.addDisplayHook=function(n){if(!n||!n.tagName)return 0;switch(n.tagName){case"TEXTAREA":return 0;case"INPUT":switch(n.type){case"submit":if(n.value)return o(n,"value");default:return 0}}var t=0;if(n.childNodes&&n.childNodes.length)for(var e=0;e<n.childNodes.length;++e){var a=n.childNodes[e];switch(a.nodeType){case 1:t+=h.addDisplayHook(a);break;case 2:case 3:t+=i(a)}}return t},this.addDisplayHookById=function(n){return h.addDisplayHook(document.getElementById(n))};var d=function(n){text=n.contentField.value,n.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),n.mce.setContent(text,{format:"html"})};this.addDisplayHooks=function(n){for(var t=0;t<n.length;++t){var e=n[t];h.addDisplayHook(e)}},this.addDisplayHookAttrs=function(n,t){for(var e=0;e<t.length;++e){var a=t[e];o(n,a)}},this.addDisplayHooksAttrs=function(n,t){for(var e=0;e<n.length;++e){var a=n[e];h.addDisplayHookAttrs(a,t)}},this.addDisplayHooksByClass=function(n,t){var e=t.getElementsByClassName(n);h.addDisplayHooks(e)},this.addDisplayHooksByTagInClass=function(n,t,e){for(var a=e.getElementsByClassName(n),i=0;i<a.length;++i){var s=a[i].getElementsByTagName(t);h.addDisplayHooks(s)}},this.addCustomContentHooks=function(){for(var n=0;n<qTranslateConfig.custom_fields.length;++n){var t=qTranslateConfig.custom_fields[n];h.addContentHookByIdName(t)}for(n=0;n<qTranslateConfig.custom_field_classes.length;++n)t=qTranslateConfig.custom_field_classes[n],h.addContentHooksByClass(t);qTranslateConfig.LSB&&setTinyMceInit()};this.addContentHooksTinyMCE=function(){function a(n){var t=n.id;if(t){var e=C[t];if(e&&!e.mce){(e.mce=n).getContainer().className+=" qtranxs-translatable",n.getElement().className+=" qtranxs-translatable";var a=e.updateTinyMCEonInit;return null==a&&(a=n.getContent({format:"html"}).replace(/\s+/g,"")!=e.contentField.value.replace(/\s+/g,"")),a&&d(e),e}}}setTinyMceInit=function(){if(window.tinyMCE)for(var n in C){var t=C[n];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[n]){if(t.mceInit=tinyMCEPreInit.mceInit[n],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var e=tinymce.DOM.select("#wp-"+n+"-wrap");e&&e.length&&(t.wrapper=e[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[n].init_instance_callback=function(n){a(n)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE&&tinyMCE.editors)for(var n=0;n<tinyMCE.editors.length;++n)a(tinyMCE.editors[n])},window.addEventListener("load",loadTinyMceHooks)},qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(n){qTranslateConfig.onTabSwitchFunctions.push(n)},this.addLanguageSwitchBeforeListener=function(n){qTranslateConfig.onTabSwitchFunctionsSave.push(n)},this.delLanguageSwitchBeforeListener=function(n){for(var t=0;t<qTranslateConfig.onTabSwitchFunctionsSave.length;++t)if(qTranslateConfig.onTabSwitchFunctionsSave[t]==n)return void qTranslateConfig.onTabSwitchFunctionsSave.splice(t,1)},this.addLanguageSwitchAfterListener=function(n){qTranslateConfig.onTabSwitchFunctionsLoad.push(n)},this.delLanguageSwitchAfterListener=function(n){for(var t=0;t<qTranslateConfig.onTabSwitchFunctionsLoad.length;++t)if(qTranslateConfig.onTabSwitchFunctionsLoad[t]==n)return void qTranslateConfig.onTabSwitchFunctionsLoad.splice(t,1)},this.enableLanguageSwitchingButtons=function(n){var t=n?"block":"none";for(var e in qTranslateConfig.tabSwitches){for(var a=qTranslateConfig.tabSwitches[e],i=0;i<a.length;++i){a[i],a[i].parentElement.style.display=t;break}break}};var v=function(){for(var n=document.getElementsByClassName("wrap"),t=0;t<n.length;++t)if((e=n[t].getElementsByTagName("form")).length)return e[0];var e;if(1===(e=document.getElementsByTagName("form")).length)return e[0];for(t=0;t<e.length;++t){var a=e[t];if((n=a.getElementsByClassName("wrap")).length)return a}return null};if("function"==typeof n.addContentHooks&&n.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&function(n){for(var t in n){var e,a=n[t];if(a.form){if(a.form.id)e=document.getElementById(a.form.id);else if(a.form.jquery)e=b(a.form.jquery);else if(a.form.name){var i=document.getElementsByName(a.form.name);i&&i.length&&(e=i[0])}}else e=document.getElementById(t);for(var s in e||(e=v())||(e=document),a.fields){var o=a.fields[s],r=[];o.container_id?(g=document.getElementById(o.container_id))&&r.push(g):o.container_jquery?r=b(o.container_jquery):o.container_class?r=document.getElementsByClassName(o.container_class):r.push(e);var l=o.encode;switch(l){case"none":continue;case"display":if(o.jquery)for(var c=0;c<r.length;++c){var g=r[c],f=b(g).find(o.jquery);o.attrs?h.addDisplayHooksAttrs(f,o.attrs):h.addDisplayHooks(f)}else{var u=o.id?o.id:s,d=document.getElementById(u);o.attrs?h.addDisplayHookAttrs(d,o.attrs):h.addDisplayHook(d)}break;case"[":case"<":case"{":case"byline":default:if(o.jquery)for(c=0;c<r.length;++c)g=r[c],f=b(g).find(o.jquery),h.addContentHooks(f,l,o.name);else u=o.id?o.id:s,h.addContentHookById(u,l,o.name)}}}}(qTranslateConfig.page_config.forms),b(".i18n-multilingual").each(function(n,t){h.addContentHook(t,"[")}),b(".i18n-multilingual-curly").each(function(n,t){h.addContentHook(t,"{")}),b(".i18n-multilingual-term").each(function(n,t){h.addContentHook(t,"term")}),b(".i18n-multilingual-slug").each(function(n,t){h.addContentHook(t,"slug")}),b(".i18n-multilingual-display").each(function(n,t){h.addDisplayHook(t)}),!f.length&&!u.length){var t=!1;for(var r in C){t=!0;break}if(!t)return}this.onLoadLanguage=function(n,t){for(var e=qTranslateConfig.onTabSwitchFunctionsLoad,a=0;a<e.length;++a)e[a].call(qTranslateConfig.qtx,n,t)},this.switchActiveLanguage=function(n){if(qTranslateConfig.activeLanguage!==n){if(qTranslateConfig.activeLanguage){for(var t=!0,e=qTranslateConfig.onTabSwitchFunctionsSave,a=0;a<e.length;++a)!1===e[a].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,n)&&(t=!1);if(!t)return;var i=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage];for(a=0;a<i.length;++a)i[a].classList.remove(qTranslateConfig.lsb_style_active_class),b(i[a]).find(".button").removeClass("active")}var s=qTranslateConfig.activeLanguage;for(qTranslateConfig.activeLanguage=n,i=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],a=0;a<i.length;++a)i[a].classList.add(qTranslateConfig.lsb_style_active_class),b(i[a]).find(".button").addClass("active");var o=qTranslateConfig.onTabSwitchFunctions;for(a=0;a<o.length;++a)o[a].call(qTranslateConfig.qtx,n,s);h.onLoadLanguage(n,s)}},this.clickSwitchLanguage=function(){var n=b(this).hasClass("button")?this.parentNode:this,t=n.lang;t?(b(".qtranxs-lang-switch-wrap").hasClass("copying")?(h.copyContentFrom(t),b(n).find(".button").blur()):h.switchActiveLanguage(t),b(".qtranxs-lang-switch-wrap").removeClass("copying"),b(".qtranxs-lang-copy .button").removeClass("active")):alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !lang")},this.toggleCopyFrom=function(){b(".qtranxs-lang-switch-wrap").toggleClass("copying"),b(".qtranxs-lang-copy .button").toggleClass("active"),b(".qtranxs-lang-switch-wrap").hasClass("copying")?b(".qtranxs-lang-switch").each(function(){b(this).attr("orig-title",b(this).attr("title")),b(this).attr("lang")==qTranslateConfig.activeLanguage?b(this).attr("title",qTranslateConfig.strings.CopyFromAlt):b(this).attr("title",qTranslateConfig.strings.CopyFrom+" [:"+b(this).attr("lang")+"]")}):b(".qtranxs-lang-switch").each(function(){b(this).attr("title",b(this).attr("orig-title"))})},this.copyContentFrom=function(n){var t=qTranslateConfig.activeLanguage,e=!1;for(var a in C){var i=C[a],s=i.mce&&!i.mce.hidden,o=s?i.mce.getContent({format:"html"}):i.contentField.value;o||(o=i.fields[n].value)&&(i.contentField.value=o,s&&d(i),e=!0)}e&&h.onLoadLanguage(t,n)},this.createSetOfLSBwith=function(n){var t=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap "+n}),e=qTranslateConfig.language_config;for(var a in qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={}),e){var i=e[a],s=qTranslateConfig.flag_location,o=qtranxj_ce("li",{lang:a,className:"qtranxs-lang-switch qtranxs-lang-switch-"+a,title:qTranslateConfig.strings.ShowIn+i.admin_name+" [:"+a+"]",onclick:h.clickSwitchLanguage},t),r=o;"button"==qTranslateConfig.lsb_style_subitem&&(r=qtranxj_ce("button",{className:"button button-secondary",type:"button"},o)),qtranxj_ce("img",{src:s+i.flag},r),qtranxj_ce("span",{innerHTML:i.name},r),qTranslateConfig.activeLanguage==a&&(o.classList.add(qTranslateConfig.lsb_style_active_class),b(o).find(".button").addClass("active")),qTranslateConfig.tabSwitches[a]||(qTranslateConfig.tabSwitches[a]=[]),qTranslateConfig.tabSwitches[a].push(o)}if(!qTranslateConfig.hide_lsb_copy_content){var l=qtranxj_ce("li",{className:"qtranxs-lang-copy"},t),c=qtranxj_ce("button",{className:"button button-secondary",type:"button",title:qTranslateConfig.strings.CopyFromAlt,onclick:h.toggleCopyFrom},l);qtranxj_ce("span",{innerHTML:qTranslateConfig.strings.CopyFrom},c)}return t},this.createSetOfLSB=function(){return h.createSetOfLSBwith(qTranslateConfig.lsb_style_wrap_class+" widefat")};if(qTranslateConfig.LSB){this.addContentHooksTinyMCE(),function(){var n=document.getElementById("qtranxs-meta-box-lsb");if(n){var t=n.getElementsByClassName("inside");if(t.length){n.className+=" closed",b(n).find(".hndle").remove();var e=document.createElement("span");n.insertBefore(e,t[0]),e.className="hndle ui-sortable-handle";var a=h.createSetOfLSBwith(qTranslateConfig.lsb_style_wrap_class);e.appendChild(a),b("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")}}}();var l=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var c in qTranslateConfig.page_config.anchors){var m=qTranslateConfig.page_config.anchors[c];if(T=document.getElementById(c))l.push({f:T,where:m.where});else if(m.jquery)for(var q=b(m.jquery),p=0;p<q.length;++p){var T=q[p];l.push({f:T,where:m.where})}}for(l.length||((T=n.langSwitchWrapAnchor)||(T=v()),T&&l.push({f:T,where:"before"})),p=0;p<l.length;++p){if(!(m=l[p]).where||0<=m.where.indexOf("before")){var y=h.createSetOfLSB();m.f.parentNode.insertBefore(y,m.f)}m.where&&0<=m.where.indexOf("after")&&(y=h.createSetOfLSB(),m.f.parentNode.insertBefore(y,m.f.nextSibling)),m.where&&0<=m.where.indexOf("first")&&(y=h.createSetOfLSB(),m.f.insertBefore(y,m.f.firstChild)),m.where&&0<=m.where.indexOf("last")&&(y=h.createSetOfLSB(),m.f.insertBefore(y,null))}this.addLanguageSwitchListener(function(n){g(n);for(var t=f.length;0<=--t;)(a=f[t]).nd.parentNode?a.nd.nodeValue=a.contents[n]:f.splice(t,1);for(t=u.length;0<=--t;)(a=u[t]).nd.parentNode?a.nd.setAttribute(a.attr,a.contents[n]):u.splice(t,1);if(!qTranslateConfig.RAW)for(var e in C){var a,i=(a=C[e]).mce&&!a.mce.hidden;i&&a.mce.save({format:"html"});var s=a.contentField.value.trim(),o=qtranxj_get_split_blocks(s);if(!o||o.length<=1){a.fields[a.lang].value=s,a.lang=n;var r=a.fields[a.lang].value;a.contentField.placeholder&&""!=r&&(a.contentField.placeholder=""),a.contentField.value=r,i&&d(a)}else{var l=qtranxj_split_blocks(o);for(var c in a.fields)a.fields[c].value=l[c];a.lang=n}}}),n.onTabSwitch&&this.addLanguageSwitchListener(n.onTabSwitch)}}(qTranslateConfig.js))}(jQuery);