function qtranxj_get_cookie(e){for(var a=document.cookie.split(";"),n=0;n<a.length;++n){var t=a[n],i=t.split("=");if(i[0].trim()==e&&!(a.length<2))return i[1].trim()}return""}function qtranxj_ce(e,a,n,t){var i=document.createElement(e);if(a)for(prop in a)i[prop]=a[prop];return n&&(t&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i}function qtranxj_LanguageSwitch(e){function a(){var e=this;if(!e.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(qTranslateConfig.activeLanguage!==e.lang){if(qTranslateConfig.activeLanguage){for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],n=0;n<a.length;++n)a[n].classList.remove(qTranslateConfig.lsb_style_active_class);for(var t=qTranslateConfig.onTabSwitchFunctionsSave,n=0;n<t.length;++n)t[n].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,e.lang)}var i=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=e.lang;for(var a=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],n=0;n<a.length;++n)a[n].classList.add(qTranslateConfig.lsb_style_active_class);for(var s=qTranslateConfig.onTabSwitchFunctions,n=0;n<s.length;++n)s[n].call(qTranslateConfig.qtx,e.lang,i);for(var o=qTranslateConfig.onTabSwitchFunctionsLoad,n=0;n<o.length;++n)o[n].call(qTranslateConfig.qtx,e.lang,i)}}var n=qTranslateConfig.enabled_languages,t=qTranslateConfig.language_name;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var i=0;i<n.length;++i){var s=qTranslateConfig.flag_location,o=n[i],r=qtranxj_ce("li",{lang:o,className:"qtranxs-lang-switch",onclick:a},e);qtranxj_ce("img",{src:s+qTranslateConfig.flag[o]},r),qtranxj_ce("span",{innerHTML:t[o]},r),qTranslateConfig.activeLanguage==o&&r.classList.add(qTranslateConfig.lsb_style_active_class),qTranslateConfig.tabSwitches[o]||(qTranslateConfig.tabSwitches[o]=[]),qTranslateConfig.tabSwitches[o].push(r)}}qtranxj_get_split_blocks=function(e){var a=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\])/gi;return e.xsplit(a)},qtranxj_split=function(e){var a=qtranxj_get_split_blocks(e);return qtranxj_split_blocks(a)},qtranxj_split_blocks=function(e){for(var a=new Object,n=0;n<qTranslateConfig.enabled_languages.length;++n){var t=qTranslateConfig.enabled_languages[n];a[t]=""}if(!e||!e.length)return a;if(1==e.length){for(var i=e[0],s=0;s<qTranslateConfig.enabled_languages.length;++s){var t=qTranslateConfig.enabled_languages[s];a[t]+=i}return a}for(var o,r=/<!--:([a-z]{2})-->/gi,l=/\[:([a-z]{2})\]/gi,t=!1,n=0;n<e.length;++n){var i=e[n];if(i.length)if(o=r.exec(i),r.lastIndex=0,null==o)if(o=l.exec(i),l.lastIndex=0,null==o)if("<!--:-->"!=i&&"[:]"!=i)if(t)a[t]+=i,t=!1;else for(var g in a)a[g]+=i;else t=!1;else t=o[1];else t=o[1]}return a},String.prototype.xsplit=function(e){if(3==="a~b".split(/(~)/).length)return this.split(e);e.global||(e=new RegExp(e.source,"g"+(e.ignoreCase?"i":"")));for(var a,n=0,t=[];null!=(a=e.exec(this));)t.push(this.slice(n,a.index)),a.length>1&&t.push(a[1]),n=e.lastIndex;return n<this.length&&t.push(this.slice(n)),n==this.length&&t.push(""),t};var qTranslateX=function(e){this.ge=function(e){return document.getElementById(e)},isLanguageEnabled=function(e){for(var a=0;a<qTranslateConfig.enabled_languages.length;++a)if(qTranslateConfig.enabled_languages[a]==e)return!0;return!1},setLangCookie=function(e){document.cookie="qtrans_edit_language="+e},qTranslateConfig.activeLanguage,qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,setLangCookie(qTranslateConfig.activeLanguage))):(qTranslateConfig.activeLanguage=qTranslateConfig.language,setLangCookie(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};var a={},n=0;updateFusedValueH=function(e,n){var t=a[e],i=n.trim();t.fields[t.lang].value=i},addContentHook=function(e,t,i){if(!e)return!1;if(!e.name)return!1;switch(e.tagName){case"TEXTAREA":case"INPUT":break;default:return!1}if(e.id||(e.id=e.tagName,t.id&&(e.id+=t.id),e.id+=e.name,e.name>2&&e.name.lastIndexOf("[]")==e.name.length-2&&(e.id+=++n)),a[e.id])return!0;var s=a[e.id]={};s.name=e.name,s.contentField=e,s.lang=qTranslateConfig.activeLanguage;var o=qtranxj_split(e.value);e.value=o[s.lang];var r,l,g=s.name.indexOf("[");if(0>g)r="qtranslate-fields["+s.name+"]";else if(r="qtranslate-fields["+s.name.substring(0,g)+"]",s.name.lastIndexOf("[]")<0)r+=s.name.substring(g);else{var d=s.name.length-g-2;d>0&&(r+=s.name.substring(g,d)),l="[]"}s.fields={};for(var c in o){var f=o[c],u=r+"["+c+"]";l&&(u+=l);var h=qtranxj_ce("input",{name:u,type:"hidden",className:"hidden",value:f});s.fields[c]=h,e.parentNode.insertBefore(h,e)}return i||(i="["),s.sepfield=qtranxj_ce("input",{name:r+"[qtranslate-separator]",type:"hidden",className:"hidden",value:i}),e.parentNode.insertBefore(s.sepfield,e),s.separator=i,e.className+=" qtranxs-translatable",s},this.addContentHookC=function(e,a){return addContentHook(e,a,"[")},this.addContentHookB=function(e,a){return addContentHook(e,a,"[")},this.addContentHookById=function(e,a,n){return addContentHook(this.ge(e),a,n)},this.addContentHookByIdName=function(e,a){var n;switch(e[0]){case"<":case"[":n=e.substring(0,1),e=e.substring(1)}return this.addContentHookById(e,a,n)},this.addContentHookByIdC=function(e,a){return this.addContentHookById(e,a,"[")},this.addContentHookByIdB=function(e,a){return this.addContentHookById(e,a,"[")},this.removeContentHook=function(e){if(!e)return!1;if(!e.id)return!1;if(!a[e.id])return!1;var n=a[e.id];n.sepfield&&jQuery(n.sepfield).remove();for(var t in n.fields)jQuery(n.fields[t]).remove();return jQuery(e).removeClass("qtranxs-translatable"),delete a[e.id],!0};var t=[];addDisplayHookNode=function(e){if(!e.nodeValue)return 0;var a=qtranxj_get_split_blocks(e.nodeValue);if(!a||!a.length||1==a.length)return 0;var n={};return n.nd=e,n.contents=qtranxj_split_blocks(a),e.nodeValue=n.contents[qTranslateConfig.activeLanguage],t.push(n),1};var i=[];if(addDisplayHookAttr=function(e){if(!e.value)return 0;var a=qtranxj_get_split_blocks(e.value);if(!a||!a.length||1==a.length)return 0;var n={};return n.nd=e,n.contents=qtranxj_split_blocks(a),e.value=n.contents[qTranslateConfig.activeLanguage],i.push(n),1},addDisplayHook=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":switch(e.type){case"submit":if(e.value)return addDisplayHookAttr(e);default:return 0}}var a=0;if(e.childNodes&&e.childNodes.length)for(var n=0;n<e.childNodes.length;++n){var t=e.childNodes[n];switch(t.nodeType){case 1:a+=addDisplayHook(t);break;case 2:case 3:a+=addDisplayHookNode(t)}}return a},this.addDisplayHookById=function(e){return addDisplayHook(this.ge(e))},updateTinyMCE=function(e){text=e.contentField.value,e.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),e.mce.setContent(text,{format:"html"})},onTabSwitch=function(e){setLangCookie(e);for(var n=0;n<t.length;++n){var s=t[n];s.nd.nodeValue=s.contents[e]}for(var n=0;n<i.length;++n){var s=i[n];s.nd.value=s.contents[e]}for(var o in a){var s=a[o],r=s.mce&&!s.mce.hidden;r&&s.mce.save({format:"html"}),s.fields[s.lang].value=s.contentField.value,s.lang=e;var l=s.fields[s.lang].value;s.contentField.placeholder&&""!=l&&(s.contentField.placeholder=""),s.contentField.value=l,r&&updateTinyMCE(s)}},qTranslateConfig.qtx=this,addDisplayHooks=function(e){for(var a=0;a<e.length;++a){var n=e[a];addDisplayHook(n)}},this.addDisplayHooksByClass=function(e,a){var n=a.getElementsByClassName(e);addDisplayHooks(n)},this.addDisplayHooksByTagInClass=function(e,a,n){for(var t=n.getElementsByClassName(e),i=0;i<t.length;++i){var s=t[i],o=s.getElementsByTagName(a);addDisplayHooks(o)}},addContentFieldHooks=function(e,a,n){for(var t=0;t<e.length;++t){var i=e[t];addContentHook(i,a,n)}},addContentHooksByClassName=function(e,a,n,t){n||(n=a);var i=n.getElementsByClassName(e);addContentFieldHooks(i,a,t)},this.addContentHooksByClass=function(e,a,n){var t;(0==e.indexOf("<")||0==e.indexOf("["))&&(t=e.substring(0,1),e=e.substring(1)),addContentHooksByClassName(e,a,n,t)},this.addCustomContentHooks=function(e){for(var a=0;a<qTranslateConfig.custom_fields.length;++a){var n=qTranslateConfig.custom_fields[a];this.addContentHookByIdName(n,e)}for(var a=0;a<qTranslateConfig.custom_field_classes.length;++a){var n=qTranslateConfig.custom_field_classes[a];this.addContentHooksByClass(n,e)}},this.addPageHooks=function(e){for(var a=0;a<e.length;++a){var n,t=e[a];n=t.form?document.getElementById(t.form.id):this.getWrapForm();for(var i=0;i<t.fields.length;++i){var s=t.fields[i],o=[];if(s.container_id){var r=document.getElementById(s.container_id);r&&o.push(r)}else s.container_class?o=document.getElementsByClassName(s.container_class):n&&o.push(n);var l=s.encode;switch(l){case"display":if(s.id)addDisplayHook(document.getElementById(s.id));else if(s.class)for(var g=0;g<o.length;++g)for(var r=o[g],d=r.getElementsByClassName(s.class),c=0;c<d.length;++c){var f=d[c];s.tag&&s.tag!=f.tagName||addDisplayHook(f)}else{if(!s.tag)continue;for(var g=0;g<o.length;++g){var r=o[g],u=r.getElementsByTagName(s.tag);addDisplayHooks(u)}}break;case"[":case"<":case"byline":default:if(!n)continue;if(s.id)this.addContentHookById(s.id,n,l);else if(s.class)for(var g=0;g<o.length;++g)for(var r=o[g],d=r.getElementsByClassName(s.class),c=0;c<d.length;++c){var f=d[c];s.tag&&s.tag!=f.tagName||(!s.name||f.name&&s.name==f.name)&&addContentHook(f,n,l)}else{if(!s.tag)continue;for(var g=0;g<o.length;++g)for(var r=o[g],d=r.getElementsByTagName(s.tag),c=0;c<d.length;++c){var f=d[c];(!s.name||f.name&&s.name==f.name)&&addContentHook(f,n,l)}}}}}},this.addContentHooksTinyMCE=function(){function e(e){var n=e.id;if(n){var t=a[n];if(t&&!t.mce){t.mce=e,e.getContainer().className+=" qtranxs-translatable",e.getElement().className+=" qtranxs-translatable";var i=t.updateTinyMCEonInit;if(null==i){var s=e.getContent({format:"html"}).replace(/\s+/g,""),o=t.contentField.value.replace(/\s+/g,"");i=s!=o}return i&&updateTinyMCE(t),t}}}setTinyMceInit=function(){if(window.tinyMCE)for(var n in a){var t=a[n];if("TEXTAREA"===t.contentField.tagName&&!t.mce&&!t.mceInit&&tinyMCEPreInit.mceInit[n]){if(t.mceInit=tinyMCEPreInit.mceInit[n],t.mceInit.wpautop){t.wpautop=t.mceInit.wpautop;var i=tinymce.DOM.select("#wp-"+n+"-wrap");i&&i.length&&(t.wrapper=i[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))}else t.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[n].init_instance_callback=function(a){e(a)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE)for(var a=0;a<tinyMCE.editors.length;++a){var n=tinyMCE.editors[a];e(n)}},window.addEventListener("load",loadTinyMceHooks)},qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(e){qTranslateConfig.onTabSwitchFunctions.push(e)},this.addLanguageSwitchBeforeListener=function(e){qTranslateConfig.onTabSwitchFunctionsSave.push(e)},this.addLanguageSwitchAfterListener=function(e){qTranslateConfig.onTabSwitchFunctionsLoad.push(e)},this.getWrapForm=function(){for(var e=document.getElementsByClassName("wrap"),a=0;a<e.length;++a){var n=e[a],t=n.getElementsByTagName("form");if(t.length)return t[0]}var t=document.getElementsByTagName("form");if(1===t.length)return t[0];for(var a=0;a<t.length;++a){var i=t[a];if(e=i.getElementsByClassName("wrap"),e.length)return i}return null},this.getFormWrap=function(){for(var e=document.getElementsByTagName("form"),a=0;a<e.length;++a){var n=e[a],t=n.getElementsByClassName("wrap");if(t.length)return t[0]}for(var t=document.getElementsByClassName("wrap"),a=0;a<t.length;++a){var i=t[a];if(e=i.getElementsByTagName("form"),e.length)return i}return null},"function"==typeof e.addContentHooks&&e.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&this.addPageHooks(qTranslateConfig.page_config.forms),!t.length&&!i.length){var s=!1;for(var o in a){s=!0;break}if(!s)return}if(qTranslateConfig.LSB&&qTranslateConfig.enabled_languages.length>1){var r=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var l=0;l<qTranslateConfig.page_config.anchors.length;++l){var g=qTranslateConfig.page_config.anchors[l],d=document.getElementById(g);d&&r.push(d)}if(!r.length){var d=e.langSwitchWrapAnchor;d||(d=this.getWrapForm()),d||(d=this.getWrapForm()),d&&r.push(d)}for(var l=0;l<r.length;++l){var g=r[l],c=qtranxj_ce("ul",{className:qTranslateConfig.lsb_style_wrap_class});g.parentNode.insertBefore(c,g);{new qtranxj_LanguageSwitch(c)}}this.addLanguageSwitchListener(onTabSwitch),e.onTabSwitch&&this.addLanguageSwitchListener(e.onTabSwitch)}};jQuery(document).ready(function(){new qTranslateX(qTranslateConfig.js)});