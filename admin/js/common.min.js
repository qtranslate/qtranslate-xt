function qtranxj_get_cookie(n){for(var e=document.cookie.split(";"),a=0;a<e.length;++a){var t=e[a],i=t.split("=");if(i[0].trim()==n&&!(e.length<2))return i[1].trim()}return""}function qtranxj_ce(n,e,a,t){var i=document.createElement(n);if(e)for(prop in e)i[prop]=e[prop];return a&&(t&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i)),i}qtranxj_get_split_blocks=function(n){var e=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\]|\[:\]|\{:[a-z]{2}\}|\{:\})/gi;return n.xsplit(e)},qtranxj_split=function(n){var e=qtranxj_get_split_blocks(n);return qtranxj_split_blocks(e)},qtranxj_split_blocks=function(n){var e=new Object;for(var a in qTranslateConfig.language_config)e[a]="";if(!n||!n.length)return e;if(1==n.length){var t=n[0];for(var a in qTranslateConfig.language_config)e[a]+=t;return e}for(var i,r=/<!--:([a-z]{2})-->/gi,o=/\[:([a-z]{2})\]/gi,s=/\{:([a-z]{2})\}/gi,a=!1,l=0;l<n.length;++l){var t=n[l];if(t.length)if(i=r.exec(t),r.lastIndex=0,null==i)if(i=o.exec(t),o.lastIndex=0,null==i)if(i=s.exec(t),s.lastIndex=0,null==i)if("<!--:-->"!=t&&"[:]"!=t&&"{:}"!=t)if(a)e[a]?e[a]+=t:e[a]=t,a=!1;else for(var g in e)e[g]+=t;else a=!1;else a=i[1];else a=i[1];else a=i[1]}return e},String.prototype.xsplit=function(n){if(3==="a~b".split(/(~)/).length)return this.split(n);n.global||(n=new RegExp(n.source,"g"+(n.ignoreCase?"i":"")));for(var e,a=0,t=[];null!=(e=n.exec(this));)t.push(this.slice(a,e.index)),e.length>1&&t.push(e[1]),a=n.lastIndex;return a<this.length&&t.push(this.slice(a)),a==this.length&&t.push(""),t};var qTranslateX=function(n){var e=this;qTranslateConfig.qtx=this,this.getLanguages=function(){return qTranslateConfig.language_config},this.getFlagLocation=function(){return qTranslateConfig.flag_location},this.isLanguageEnabled=function(n){return!!qTranslateConfig.language_config[n]};var a=function(n){document.cookie="qtrans_edit_language="+n},t=function(n){document.cookie="qtrans_copy_language="+n};qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&this.isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,this.isLanguageEnabled(qTranslateConfig.activeLanguage)?a(qTranslateConfig.activeLanguage):qTranslateConfig.LSB=!1),qTranslateConfig.CopyFromLang=qtranxj_get_cookie("qtrans_copy_language"),qTranslateConfig.CopyFromLang&&this.isLanguageEnabled(qTranslateConfig.CopyFromLang)||(qTranslateConfig.CopyFromLang=qTranslateConfig.default_language,t(qTranslateConfig.CopyFromLang))):(qTranslateConfig.activeLanguage=qTranslateConfig.language,a(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage},this.getLanguages=function(){return qTranslateConfig.language_config};var i={};this.hasContentHook=function(n){return i[n]},this.addContentHook=function(n,a,t){if(!n)return!1;switch(n.tagName){case"TEXTAREA":break;case"INPUT":switch(n.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!t){if(!n.name)return!1;t=n.name}if(n.id){if(i[n.id]){if(jQuery.contains(document,n))return i[n.id];e.removeContentHook(n)}}else if(i[t]){var r=0;do++r,n.id=t+r;while(i[n.id])}else n.id=t;n.className+=" qtranxs-translatable";var o=i[n.id]={};o.name=t,o.contentField=n,o.lang=qTranslateConfig.activeLanguage;var s;if(a)switch(a){case"slug":s="qtranslate-slugs[";break;case"term":s="qtranslate-terms[";break;default:s="qtranslate-fields["}else a="[",s="qtranslate-fields[";o.encode=a;var l,g,f=o.name.indexOf("[");if(0>f)l=s+o.name+"]";else if(l=s+o.name.substring(0,f)+"]",o.name.lastIndexOf("[]")<0)l+=o.name.substring(f);else{var c=o.name.length-2;c>f&&(l+=o.name.substring(f,c)),g="[]"}var u;if(o.fields={},!qTranslateConfig.RAW){u=qtranxj_split(n.value),n.value=u[o.lang];for(var d in u){var h=u[d],v=l+"["+d+"]";g&&(v+=g);var C=qtranxj_ce("input",{name:v,type:"hidden",className:"hidden",value:h});o.fields[d]=C,n.parentNode.insertBefore(C,n)}}switch(a){case"slug":case"term":qTranslateConfig.RAW&&(u=qtranxj_split(n.value)),o.sepfield=qtranxj_ce("input",{name:l+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:u[qTranslateConfig.default_language]});break;default:qTranslateConfig.RAW||(o.sepfield=qtranxj_ce("input",{name:l+"[qtranslate-separator]",type:"hidden",className:"hidden",value:a}))}return o.sepfield&&n.parentNode.insertBefore(o.sepfield,n),o},this.addContentHookC=function(n){return e.addContentHook(n,"[")},this.addContentHookB=function(n){return e.addContentHook(n,"[")},this.addContentHookById=function(n,a,t){return e.addContentHook(document.getElementById(n),a,t)},this.addContentHookByIdName=function(n){var a;switch(n[0]){case"<":case"[":a=n.substring(0,1),n=n.substring(1)}return e.addContentHookById(n,a)},this.addContentHookByIdC=function(n){return e.addContentHookById(n,"[")},this.addContentHookByIdB=function(n){return e.addContentHookById(n,"[")},this.addContentHooks=function(n,a,t){for(var i=0;i<n.length;++i){var r=n[i];e.addContentHook(r,a,t)}};var r=function(n,a,t){a||(a=document);var i=a.getElementsByClassName(n);e.addContentHooks(i,t)};this.addContentHooksByClass=function(n,e){var a;(0==n.indexOf("<")||0==n.indexOf("["))&&(a=n.substring(0,1),n=n.substring(1)),r(n,e,a)},this.addContentHooksByTagInClass=function(n,a,t){for(var i=t.getElementsByClassName(n),r=0;r<i.length;++r){var o=i[r],s=o.getElementsByTagName(a);e.addContentHooks(s)}};var o=function(n){if(!n)return!1;n.sepfield&&jQuery(n.sepfield).remove();for(var e in n.fields)jQuery(n.fields[e]).remove();return delete i[n.contentField.id],!0};this.removeContentHook=function(n){if(!n)return!1;if(!n.id)return!1;if(!i[n.id])return!1;var e=i[n.id];return o(e),jQuery(n).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(n){if(!n)return!1;if(!n.id)return!1;var a=i[n.id];return a&&o(a),e.addContentHook(n)};var s=function(n){if(n[qTranslateConfig.language])return"("+qTranslateConfig.language+") "+n[qTranslateConfig.language];if(n[qTranslateConfig.default_language])return"("+qTranslateConfig.default_language+") "+n[qTranslateConfig.default_language];for(var e in n)if(n[e])return"("+e+") "+n[e];return""},l=function(n){var e=null;for(var a in n)n[a]||(e||(e=s(n)),n[a]=e)},g=[],f=function(n){if(!n.nodeValue)return 0;var e=qtranxj_get_split_blocks(n.nodeValue);if(!e||!e.length||1==e.length)return 0;var a={};return a.nd=n,a.contents=qtranxj_split_blocks(e),l(a.contents),n.nodeValue=a.contents[qTranslateConfig.activeLanguage],g.push(a),1},c=[],u=function(n,e){if(!n.hasAttribute(e))return 0;var a=n.getAttribute(e),t=qtranxj_get_split_blocks(a);if(!t||!t.length||1==t.length)return 0;var i={};return i.nd=n,i.attr=e,i.contents=qtranxj_split_blocks(t),l(i.contents),n.setAttribute(e,i.contents[qTranslateConfig.activeLanguage]),c.push(i),1};this.addDisplayHook=function(n){if(!n||!n.tagName)return 0;switch(n.tagName){case"TEXTAREA":return 0;case"INPUT":switch(n.type){case"submit":if(n.value)return u(n,"value");default:return 0}}var a=0;if(n.childNodes&&n.childNodes.length)for(var t=0;t<n.childNodes.length;++t){var i=n.childNodes[t];switch(i.nodeType){case 1:a+=e.addDisplayHook(i);break;case 2:case 3:a+=f(i)}}return a},this.addDisplayHookById=function(n){return e.addDisplayHook(document.getElementById(n))};var d=function(n){text=n.contentField.value,n.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),n.mce.setContent(text,{format:"html"})},h=function(n){a(n);for(var e=g.length;--e>=0;){var t=g[e];t.nd.parentNode?t.nd.nodeValue=t.contents[n]:g.splice(e,1)}for(var e=c.length;--e>=0;){var t=c[e];t.nd.parentNode?t.nd.setAttribute(t.attr,t.contents[n]):c.splice(e,1)}if(!qTranslateConfig.RAW)for(var r in i){var t=i[r],o=t.mce&&!t.mce.hidden;o&&t.mce.save({format:"html"}),t.fields[t.lang].value=t.contentField.value,t.lang=n;var s=t.fields[t.lang].value;t.contentField.placeholder&&""!=s&&(t.contentField.placeholder=""),t.contentField.value=s,o&&d(t)}};this.addDisplayHooks=function(n){for(var a=0;a<n.length;++a){var t=n[a];e.addDisplayHook(t)}},this.addDisplayHookAttrs=function(n,e){for(var a=0;a<e.length;++a){var t=e[a];u(n,t)}},this.addDisplayHooksAttrs=function(n,a){for(var t=0;t<n.length;++t){var i=n[t];e.addDisplayHookAttrs(i,a)}},this.addDisplayHooksByClass=function(n,a){var t=a.getElementsByClassName(n);e.addDisplayHooks(t)},this.addDisplayHooksByTagInClass=function(n,a,t){for(var i=t.getElementsByClassName(n),r=0;r<i.length;++r){var o=i[r],s=o.getElementsByTagName(a);e.addDisplayHooks(s)}},this.addCustomContentHooks=function(){for(var n=0;n<qTranslateConfig.custom_fields.length;++n){var a=qTranslateConfig.custom_fields[n];e.addContentHookByIdName(a)}for(var n=0;n<qTranslateConfig.custom_field_classes.length;++n){var a=qTranslateConfig.custom_field_classes[n];e.addContentHooksByClass(a)}qTranslateConfig.LSB&&setTinyMceInit()};var v=function(n){n(".i18n-multilingual").each(function(n,a){e.addContentHook(a,"[")}),n(".i18n-multilingual-curly").each(function(n,a){e.addContentHook(a,"{")}),n(".i18n-multilingual-term").each(function(n,a){e.addContentHook(a,"term")}),n(".i18n-multilingual-slug").each(function(n,a){e.addContentHook(a,"slug")}),n(".i18n-multilingual-display").each(function(n,a){e.addDisplayHook(a)})},C=function(n){for(var a in n){var t,i=n[a];if(i.form){if(i.form.id)t=document.getElementById(i.form.id);else if(i.form.jquery)t=$(i.form.jquery);else if(i.form.name){var r=document.getElementsByName(i.form.name);r&&r.length&&(t=r[0])}}else t=document.getElementById(a);t||(t=m(),t||(t=document));for(var o in i.fields){var s=i.fields[o],l=[];if(s.container_id){var g=document.getElementById(s.container_id);g&&l.push(g)}else s.container_jquery?l=$(s.container_jquery):s.container_class?l=document.getElementsByClassName(s.container_class):l.push(t);var f=s.encode;switch(f){case"none":continue;case"display":if(s.jquery)for(var c=0;c<l.length;++c){var g=l[c],u=jQuery(g).find(s.jquery);s.attrs?e.addDisplayHooksAttrs(u,s.attrs):e.addDisplayHooks(u)}else{var d=s.id?s.id:o,h=document.getElementById(d);s.attrs?e.addDisplayHookAttrs(h,s.attrs):e.addDisplayHook(h)}break;case"[":case"<":case"{":case"byline":default:if(s.jquery)for(var c=0;c<l.length;++c){var g=l[c],u=jQuery(g).find(s.jquery);e.addContentHooks(u,f,s.name)}else{var d=s.id?s.id:o;e.addContentHookById(d,f,s.name)}}}}},q=function(){function n(n){var e=n.id;if(e){var a=i[e];if(a&&!a.mce){a.mce=n,n.getContainer().className+=" qtranxs-translatable",n.getElement().className+=" qtranxs-translatable";var t=a.updateTinyMCEonInit;if(null==t){var r=n.getContent({format:"html"}).replace(/\s+/g,""),o=a.contentField.value.replace(/\s+/g,"");t=r!=o}return t&&d(a),a}}}setTinyMceInit=function(){if(window.tinyMCE)for(var e in i){var a=i[e];if("TEXTAREA"===a.contentField.tagName&&!a.mce&&!a.mceInit&&tinyMCEPreInit.mceInit[e]){if(a.mceInit=tinyMCEPreInit.mceInit[e],a.mceInit.wpautop){a.wpautop=a.mceInit.wpautop;var t=tinymce.DOM.select("#wp-"+e+"-wrap");t&&t.length&&(a.wrapper=t[0],a.wrapper&&(tinymce.DOM.hasClass(a.wrapper,"tmce-active")&&(a.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(a.wrapper,"html-active")&&(a.updateTinyMCEonInit=!1)))}else a.updateTinyMCEonInit=!1;tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){n(e)}}}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE&&tinyMCE.editors)for(var e=0;e<tinyMCE.editors.length;++e){var a=tinyMCE.editors[e];n(a)}},window.addEventListener("load",loadTinyMceHooks)};qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(n){qTranslateConfig.onTabSwitchFunctions.push(n)},this.addLanguageSwitchBeforeListener=function(n){qTranslateConfig.onTabSwitchFunctionsSave.push(n)},this.delLanguageSwitchBeforeListener=function(n){for(var e=0;e<qTranslateConfig.onTabSwitchFunctionsSave.length;++e){var a=qTranslateConfig.onTabSwitchFunctionsSave[e];if(a==n)return void qTranslateConfig.onTabSwitchFunctionsSave.splice(e,1)}},this.addLanguageSwitchAfterListener=function(n){qTranslateConfig.onTabSwitchFunctionsLoad.push(n)},this.delLanguageSwitchAfterListener=function(n){for(var e=0;e<qTranslateConfig.onTabSwitchFunctionsLoad.length;++e){var a=qTranslateConfig.onTabSwitchFunctionsLoad[e];if(a==n)return void qTranslateConfig.onTabSwitchFunctionsLoad.splice(e,1)}},this.enableLanguageSwitchingButtons=function(n){var e=n?"block":"none";for(var a in qTranslateConfig.tabSwitches){for(var t=qTranslateConfig.tabSwitches[a],i=0;i<t.length;++i){var r=(t[i],t[i].parentElement);r.style.display=e;break}break}};var m=function(){for(var n=document.getElementsByClassName("wrap"),e=0;e<n.length;++e){var a=n[e],t=a.getElementsByTagName("form");if(t.length)return t[0]}var t=document.getElementsByTagName("form");if(1===t.length)return t[0];for(var e=0;e<t.length;++e){var i=t[e];if(n=i.getElementsByClassName("wrap"),n.length)return i}return null};if("function"==typeof n.addContentHooks&&n.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&C(qTranslateConfig.page_config.forms),v(jQuery),!g.length&&!c.length){var p=!1;for(var T in i){p=!0;break}if(!p)return}this.onLoadLanguage=function(n,e){for(var a=qTranslateConfig.onTabSwitchFunctionsLoad,t=0;t<a.length;++t)a[t].call(qTranslateConfig.qtx,n,e)},this.switchActiveLanguage=function(){var n=this,a=n.lang;if(!a)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !lang");if(qTranslateConfig.activeLanguage!==a){if(qTranslateConfig.activeLanguage){for(var t=!0,i=qTranslateConfig.onTabSwitchFunctionsSave,r=0;r<i.length;++r){var o=i[r].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,a);o===!1&&(t=!1)}if(!t)return;for(var s=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],r=0;r<s.length;++r)s[r].classList.remove(qTranslateConfig.lsb_style_active_class)}var l=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=a;for(var s=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],r=0;r<s.length;++r)s[r].classList.add(qTranslateConfig.lsb_style_active_class);for(var g=qTranslateConfig.onTabSwitchFunctions,r=0;r<g.length;++r)g[r].call(qTranslateConfig.qtx,a,l);e.onLoadLanguage(a,l)}},this.CopyContentFrom=function(){var n=qTranslateConfig.activeLanguage,a=qTranslateConfig.CopyFromLang,t=!1;for(var r in i){var o=i[r],s=o.mce&&!o.mce.hidden,l=s?o.mce.getContent({format:"html"}):o.contentField.value;l||(l=o.fields[a].value,l&&(o.contentField.value=l,s&&d(o),t=!0))}t&&e.onLoadLanguage(n,a)},this.ChooseLangToCopy=function(){qTranslateConfig.CopyFromLang=this.value,jQuery(".qtranxs-lang-copy-select").each(function(){this.value!=qTranslateConfig.CopyFromLang&&(this.value=qTranslateConfig.CopyFromLang)}),t(qTranslateConfig.CopyFromLang)};var y=function(){return _(qTranslateConfig.lsb_style_wrap_class+" widefat")},_=function(n){var a=qtranxj_ce("ul",{className:n}),t=qTranslateConfig.language_config;qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={});for(var i in t){var r=t[i],o=qTranslateConfig.flag_location,s=qTranslateConfig.strings.ShowIn+r.admin_name+" [:"+i+"]",l=qtranxj_ce("li",{lang:i,className:"qtranxs-lang-switch qtranxs-lang-switch-"+i,title:s,onclick:e.switchActiveLanguage},a);qtranxj_ce("img",{src:o+r.flag},l),qtranxj_ce("span",{innerHTML:r.name},l),qTranslateConfig.activeLanguage==i&&l.classList.add(qTranslateConfig.lsb_style_active_class),qTranslateConfig.tabSwitches[i]||(qTranslateConfig.tabSwitches[i]=[]),qTranslateConfig.tabSwitches[i].push(l)}if(!qTranslateConfig.hide_lsb_copy_content){var g=qtranxj_ce("li",{className:"qtranxs-lang-switch qtranxs-lang-copy-li"},a),f=qtranxj_ce("span",{className:"qtranxs-lang-copy"},g),c=qTranslateConfig.strings.CopyFrom+"&nbsp;";qtranxj_ce("span",{className:"qtranxs-lang-copy-button",onclick:e.CopyContentFrom,title:qTranslateConfig.strings.CopyFromAlt,innerHTML:c},f),c="";for(var i in t){var r=t[i];c+='<option value="'+i+'">'+r.name+"</option>"}var u=qtranxj_ce("select",{className:"qtranxs-lang-copy-select",onchange:e.ChooseLangToCopy,title:qTranslateConfig.strings.ChooseLangToCopy,innerHTML:c},f);u.value=qTranslateConfig.CopyFromLang}return a},w=function(n){var e=document.getElementById("qtranxs-meta-box-lsb");if(e){var a=e.getElementsByClassName("inside");if(a.length){e.className+=" closed",n(e).find(".hndle").remove();var t=document.createElement("span");e.insertBefore(t,a[0]),t.className="hndle ui-sortable-handle";var i=_(qTranslateConfig.lsb_style_wrap_class);t.appendChild(i),n(function(n){n("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes")})}}};if(qTranslateConfig.LSB){q(),w(jQuery);var b=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var k in qTranslateConfig.page_config.anchors){var L=qTranslateConfig.page_config.anchors[k],x=document.getElementById(k);if(x)b.push({f:x,where:L.where});else if(L.jquery)for(var H=jQuery(L.jquery),B=0;B<H.length;++B){var x=H[B];b.push({f:x,where:L.where})}}if(!b.length){var x=n.langSwitchWrapAnchor;x||(x=m()),x&&b.push({f:x,where:"before"})}for(var B=0;B<b.length;++B){var L=b[B];if(!L.where||L.where.indexOf("before")>=0){var S=y();L.f.parentNode.insertBefore(S,L.f)}if(L.where&&L.where.indexOf("after")>=0){var S=y();L.f.parentNode.insertBefore(S,L.f.nextSibling)}if(L.where&&L.where.indexOf("first")>=0){var S=y();L.f.insertBefore(S,L.f.firstChild)}if(L.where&&L.where.indexOf("last")>=0){var S=y();L.f.insertBefore(S,null)}}this.addLanguageSwitchListener(h),n.onTabSwitch&&this.addLanguageSwitchListener(n.onTabSwitch)}};qTranslateConfig.js.get_qtx=function(){return qTranslateConfig.qtx||new qTranslateX(qTranslateConfig.js),qTranslateConfig.qtx},jQuery(document).ready(qTranslateConfig.js.get_qtx);