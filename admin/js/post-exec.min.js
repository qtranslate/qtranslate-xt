!function(m){m(function(){var r,o,i,l,s,c,d,e=qTranslateConfig.js.get_qtx(),h=function(e,n){switch(qTranslateConfig.url_mode.toString()){case"1":e.search?e.search+="&lang="+n:e.search="?lang="+n;break;case"2":var a=qTranslateConfig.home_url_path,t=e.pathname;"/"!==t[0]&&(t="/"+t);var r=t.indexOf(a);0<=r&&(e.pathname=qTranslateConfig.homeinfo_path+n+t.substring(r+a.length-1));break;case"3":e.host=n+"."+e.host;break;case"4":e.host=qTranslateConfig.domains[n]}},n=function(e){if(!r){var n=document.getElementById("view-post-btn");if(!n||!n.children.length)return;if("A"!==(r=n.children[0]).tagName)return;o=r.href,i=qtranxj_ce("a",{}),0<o.search(/\?/)}i.href=o,h(i,e),r.href=i.href;var a=document.getElementById("preview-action");if(a&&a.children.length&&(a.children[0].href=i.href),1!==qTranslateConfig.url_mode){if(!l){var t=document.getElementById("sample-permalink");t&&0<t.offsetHeight&&t.childNodes.length&&(l=t.childNodes[0],s=l.nodeValue)}l&&(i.href=s,h(i,e),l.nodeValue=i.href)}else d||(m("#sample-permalink").append('<span id="sample-permalink-lang-query"></span>'),d=m("#sample-permalink-lang-query")),d&&d.text((o.search(/\?/)<0?"/?lang=":"&lang=")+e);c||(c=document.getElementById("wp-admin-bar-view")),c&&c.children.length&&(c.children[0].href=r.href)},a=m("#title"),t=m("#title-prompt-text");function g(e){for(var n={},a=("?"===e[0]?e.substr(1):e).split("&"),t=0;t<a.length;t++){var r=a[t].split("=");n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return n}for(var f in e.addCustomContentHooks(),n(e.getActiveLanguage()),e.addLanguageSwitchAfterListener(n),t&&a&&e.addLanguageSwitchAfterListener(function(e){a.val()?t.addClass("screen-reader-text"):t.removeClass("screen-reader-text")}),e.getLanguages())console.log("handler",f),m("#wp-admin-bar-"+f+" a").on("click",function(e){e.preventDefault();var n=g(window.location.search),a=m(this).attr("rel");console.log("Click lang",a,n,window.location),n.lang=a,window.location=window.location.origin+window.location.pathname+"?"+m.param(n)})})}(jQuery);
