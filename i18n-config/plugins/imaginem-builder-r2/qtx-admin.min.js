var f;f=jQuery,wp.hooks.addAction("qtranx.load","qtranx/plugins/imaginem-builder-r2",function(){var r,s;f.fn.wp_editor&&((r=qTranx.hooks).get_ml||(r.get_ml=function(e,n){var i,t,a=e.contentField.value.trim(),l=qtranx.ml.splitTokens(a);if(!l||1<l.length){var d=qTranx.ml.parseTokens(l);for(o in e.fields)e.fields[o].value=d[o];return a}switch(n=n||(e.sepfield?e.sepfield.value:"{")){case"[":i="[:",t="]";break;case"<":i="\x3c!--:",t="--\x3e";break;case"{":default:i="{:",t="}"}var o=e.lang;e.fields[o].value=a;var r="";for(o in e.fields)r+=i+o+t,r+=e.fields[o].value;return r&&(r+=i+t),r}),r.addTinyMceHook||(r.addTinyMceHook=function(e){var n;window.tinyMCE&&tinyMCE.editors[e.contentField.id]&&(n=e.contentField.id,n=tinyMCE.editors[n],e.mce=n,f(n.getContainer()).addClass("qtranxs-translatable"))}),s=f.fn.wp_editor,f.fn.wp_editor=function(e){var n,i=f(this).attr("id"),t=f(this).closest("div.block-settings.modal"),a=r.hasContentHook(i);if(a&&(d=a.lang,n=a.fields[d].value,a.contentField.value=n),s.call(this,e),a){var l=document.getElementById(i);if(l){for(var d in a.contentField=l,a.fields){var o=a.fields[d];l.parentNode.insertBefore(o,l)}l.parentNode.insertBefore(a.sepfield,l),t.one("hidden.bs.modal",function(){var e=r.get_ml(a);a.contentField.value=e,a.mce=null}),r.addTinyMceHook(a)}}})});