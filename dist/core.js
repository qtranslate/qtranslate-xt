var qTranx;(()=>{"use strict";var e={d:(n,t)=>{for(var a in t)e.o(t,a)&&!e.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{config:()=>c,hooks:()=>a,ml:()=>t});var t={};e.r(t),e.d(t,{parseTokens:()=>f,splitLangs:()=>u,splitTokens:()=>g});var a={};e.r(a),e.d(a,{_addCustomContentHooks:()=>U,addContentHook:()=>N,addContentHookB:()=>xe,addContentHookById:()=>ke,addContentHookByIdB:()=>Ee,addContentHookByIdC:()=>Te,addContentHookByIdName:()=>qe,addContentHookC:()=>Ce,addContentHooks:()=>S,addContentHooksByClass:()=>H,addContentHooksByTagInClass:()=>Be,addContentHooksTinyMCE:()=>z,addCustomContentHooks:()=>V,addDisplayHook:()=>R,addDisplayHookAttrs:()=>W,addDisplayHookById:()=>Ie,addDisplayHooks:()=>D,addDisplayHooksAttrs:()=>Q,addDisplayHooksByClass:()=>Le,addDisplayHooksByTagInClass:()=>Ae,addLanguageSwitchAfterListener:()=>ee,addLanguageSwitchBeforeListener:()=>J,addLanguageSwitchListener:()=>K,attachContentHook:()=>A,attachEditorHook:()=>Y,clickSwitchLanguage:()=>se,copyContentFrom:()=>ue,createSetOfLSB:()=>pe,createSetOfLSBwith:()=>fe,delLanguageSwitchAfterListener:()=>ne,delLanguageSwitchBeforeListener:()=>Z,enableLanguageSwitchingButtons:()=>te,getActiveLanguage:()=>B,getFlagLocation:()=>ye,getLanguages:()=>we,hasContentHook:()=>L,init:()=>me,isLanguageEnabled:()=>be,loadAdditionalTinyMceHooks:()=>G,onLoadLanguage:()=>ie,refreshContentHook:()=>_,removeContentHook:()=>M,setupLanguageSwitch:()=>ve,switchActiveLanguage:()=>oe,toggleCopyFrom:()=>de});var i,r,o,s=Object.freeze({LSB:0,RAW:1,SINGLE:2}),l=Object.freeze({QUERY:1,PATH:2,DOMAIN:3,DOMAINS:4}),d=window.qTranslateConfig,c={editorMode:null==d?void 0:d.editorMode,enum:{EditorMode:s},lang:{codeRegex:null==d?void 0:d.lang_code_format,default:null==d?void 0:d.default_language},languages:d.language_config,l10n:null==d?void 0:d.strings,page:{detectedLang:d.language,i18n:{anchors:null==d||null===(i=d.page_config)||void 0===i?void 0:i.anchors,forms:null==d||null===(r=d.page_config)||void 0===r?void 0:r.forms,keys:null==d||null===(o=d.page_config)||void 0===o?void 0:o.keys}},path:{flags:null==d?void 0:d.flag_location},styles:{lsb:{activeClass:null==d?void 0:d.lsb_style_active_class,subItem:null==d?void 0:d.lsb_style_subitem,wrapClass:null==d?void 0:d.lsb_style_wrap_class,hideCopyContent:null==d?void 0:d.hide_lsb_copy_content},translatable:"qtranxs-translatable"},isLanguageEnabled:function(e){return!!this.languages[e]},isPageActive:function(e){var n;return(null===(n=this.page.i18n.keys)||void 0===n?void 0:n.indexOf(e))>=0},isEditorModeRAW:function(){return this.editorMode==s.RAW},isEditorModeLSB:function(){return this.editorMode==s.LSB},_raw:d};c.page.i18n._custom={classes:null==d?void 0:d.custom_field_classes,ids:null==d?void 0:d.custom_fields},c._urlMode=null==d?void 0:d.url_mode;var u=function(e){var n=g(e);return f(n)},g=function(e){var n="(\x3c!--:lang--\x3e|\x3c!--:--\x3e|\\[:lang]|\\[:]|{:lang}|{:})".replace(/lang/g,c.lang.codeRegex),t=new RegExp(n,"gi");return e.split(t)},f=function(e){var n=new Object;for(var t in c.languages)n[t]="";if(!e||!e.length)return n;if(1===e.length){var a=e[0];for(var i in c.languages)n[i]+=a;return n}for(var r,o=new RegExp("\x3c!--:(lang)--\x3e".replace(/lang/g,c.lang.codeRegex),"gi"),s=new RegExp("\\[:(lang)]".replace(/lang/g,c.lang.codeRegex),"gi"),l=new RegExp("{:(lang)}".replace(/lang/g,c.lang.codeRegex),"gi"),d=!1,u=0;u<e.length;++u){var g=e[u];if(g.length)if(r=o.exec(g),o.lastIndex=0,null==r)if(r=s.exec(g),s.lastIndex=0,null==r)if(r=l.exec(g),l.lastIndex=0,null==r)if("\x3c!--:--\x3e"!==g&&"[:]"!==g&&"{:}"!==g)if(d)n[d]?n[d]+=g:n[d]=g,d=!1;else for(var f in n)n[f]+=g;else d=!1;else d=r[1];else d=r[1];else d=r[1]}return n},p=function(e,n,t,a){var i=document.createElement(e);if(n)for(var r in n)i[r]=n[r];return t&&("boolean"==typeof a&&a&&(console.warn("qTranslate: deprecated boolean type in domCreateElement, will be removed in future major release."),a=t.firstChild),t.insertBefore(i,a)),i},v="qtranslate-xt-admin-edit-language",m=function(e){try{sessionStorage.setItem(v,e)}catch(e){console.log('Failed to store "'+v+'" with sessionStorage',e)}};function h(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return w(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw r}}}}function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}var y,b=jQuery,C={},x=[],k=[],q=!1,T={},E={actionFuncs:[],loadFuncs:[],saveFuncs:[]},B=function(){return y},I=function(e){y=e,window.qTranslateConfig.activeLanguage=e},L=function(e){return!!C[e]},A=function(e,n){var t=C[n||e.id];return!!t&&(e.classList.add(c.styles.translatable),t.contentField=e,!0)},N=function(e,n,t){if(!e)return!1;switch(e.tagName){case"TEXTAREA":break;case"INPUT":switch(e.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!t){if(!e.name)return console.error("Missing name in field",e),!1;t=e.name}if(e.id){if(C[e.id])return b.contains(document,e)||(console.warn("No input field with id=",e.id),M(e)),!1}else if(C[t]){var a=0;do{++a,e.id=t+a}while(C[e.id])}else e.id=t;var i=b(e).attr("form"),r=void 0!==i?b("#"+i):b(e).closest("form");if(!r.length)return console.error("No form found for translatable field id=",e.id),!1;var o,s,l,d=r[0],g={};if(g.name=t,g.lang=y,C[e.id]=g,!A(e))return console.error("Failed to attachContentHook",e.id),M(e),!1;if(n)switch(n){case"slug":o="qtranslate-slugs[";break;case"term":o="qtranslate-terms[";break;default:o="qtranslate-fields["}else n="[",o="qtranslate-fields[";g.encode=n;var f,v=g.name.indexOf("[");if(v<0)s=o+g.name+"]";else if(s=o+g.name.substring(0,v)+"]",g.name.lastIndexOf("[]")<0)s+=g.name.substring(v);else{var m=g.name.length-2;m>v&&(s+=g.name.substring(v,m)),l="[]"}if(g.fields={},!c.isEditorModeRAW()){for(var h in f=u(e.value),e.value=f[g.lang],f){var w=f[h],x=s+"["+h+"]";l&&(x+=l);var k=p("input",{name:x,type:"hidden",className:"hidden",value:w},e.parentNode,e);void 0!==i&&b(k).attr("form",i),g.fields[h]=k}r.find('input[name="qtranslate-edit-language"]').length||p("input",{type:"hidden",name:"qtranslate-edit-language",value:y},d,d.firstChild)}switch(n){case"slug":case"term":c.isEditorModeRAW()&&(f=u(e.value)),g.sepfield=p("input",{name:s+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:f[c.lang.default]},e.parentNode,e);break;default:c.isEditorModeRAW()||(g.sepfield=p("input",{name:s+"[qtranslate-separator]",type:"hidden",className:"hidden",value:n},e.parentNode,e))}return g.sepfield&&void 0!==i&&b(g.sepfield).attr("form",i),!0},S=function(e,n,t){for(var a=0;a<e.length;++a){var i=e[a];N(i,n,t)}},H=function(e,n){wp.deprecated("addContentHooksByClass",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHooks(container.getElementsByClassName(nameWithoutSeparator),container,sep)",hint:"Only meant for custom fields (separator extracted from name), now handled internally."});var t="[";0!==e.indexOf("<")&&0!==e.indexOf("[")||(t=e.substring(0,1),e=e.substring(1)),function(e,n,t){n||(n=document);var a=n.getElementsByClassName(e);S(a,t)}(e,n,t)},M=function(e){if(!e||!e.id)return!1;var n=C[e.id];if(!n)return!1;for(var t in n.sepfield&&b(n.sepfield).remove(),n.fields){var a=n.fields[t];b(a).remove()}if(n.mce){var i=n.mce;i.getContentAreaContainer().classList.remove(c.styles.translatable),i.getElement().classList.remove(c.styles.translatable)}return n.contentField.classList.remove(c.styles.translatable),delete C[e.id],e.classList.remove(c.styles.translatable),!0},_=function(e){return M(e),N(e)},F=function(e){if(e[c.page.detectedLang])return"("+c.page.detectedLang+") "+e[c.page.detectedLang];if(e[c.lang.default])return"("+c.lang.default+") "+e[c.lang.default];for(var n in e)if(e[n])return"("+n+") "+e[n];return""},O=function(e){var n=null;for(var t in e)e[t]||(n||(n=F(e)),e[t]=n)},j=function(e){if(!e.nodeValue)return 0;var n=g(e.nodeValue);if(!n||!n.length||1===n.length)return 0;var t={};return t.nd=e,t.contents=f(n),O(t.contents),e.nodeValue=t.contents[y],x.push(t),1},X=function(e,n){if(!e.hasAttribute(n))return 0;var t=e.getAttribute(n),a=g(t);if(!a||!a.length||1===a.length)return 0;var i={};return i.nd=e,i.attr=n,i.contents=f(a),O(i.contents),e.setAttribute(n,i.contents[y]),k.push(i),1},R=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":return"submit"===e.type&&e.value?X(e,"value"):0}var n=0;if(e.childNodes&&e.childNodes.length)for(var t=0;t<e.childNodes.length;++t){var a=e.childNodes[t];switch(a.nodeType){case 1:n+=R(a);break;case 2:case 3:n+=j(a)}}return n},P=function(e){var n=e.contentField.value;e.mce.settings.wpautop&&window.switchEditors&&(n=window.switchEditors.wpautop(n)),e.mce.setContent(n)},D=function(e){for(var n=0;n<e.length;++n){var t=e[n];R(t)}},W=function(e,n){for(var t=0;t<n.length;++t){var a=n[t];X(e,a)}},Q=function(e,n){for(var t=0;t<e.length;++t){var a=e[t];W(a,n)}},U=function(e){var n,t,a,i=function(e){var n=0===e.indexOf("<")||0===e.indexOf("[");return{sep:n?e.substring(0,1):"[",name:n?e.substring(1):e}},r=h(null!==(n=null==e?void 0:e.ids)&&void 0!==n?n:[]);try{for(r.s();!(a=r.n()).done;){var o=i(a.value);N(document.getElementById(o.name),o.sep)}}catch(e){r.e(e)}finally{r.f()}var s,l=h(null!==(t=null==e?void 0:e.classes)&&void 0!==t?t:[]);try{for(l.s();!(s=l.n()).done;){var d=i(s.value);S(document.getElementsByClassName(d.name),d.sep)}}catch(e){l.e(e)}finally{l.f()}},V=function(){wp.deprecated("addCustomContentHooks",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Custom fields are handled internally."}),U(c.page.i18n._custom),z()},Y=function(e,n){if(!e.id)return null;n||(n=e.id);var t=C[n];return t?(n!==e.id&&(t.contentField=document.getElementById(e.id)),t.mce||(t.mce=e,e.getContentAreaContainer().classList.add(c.styles.translatable),e.getElement().classList.add(c.styles.translatable)),t):null},z=function(){if(window.tinyMCEPreInit&&!c.isEditorModeRAW())for(var e in C){var n=C[e];"TEXTAREA"!==n.contentField.tagName||n.mce||n.mceInit||!tinyMCEPreInit.mceInit[e]||(n.mceInit=tinyMCEPreInit.mceInit[e],tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){Y(e)})}},G=function(){window.tinyMCE&&tinyMCE.get().forEach(function(e){Y(e)})},K=function(e){wp.deprecated("addLanguageSwitchListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitch", ...)'}),E.actionFuncs.push(e)},J=function(e){wp.deprecated("addLanguageSwitchBeforeListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitchPre", ...)'}),E.saveFuncs.push(e)},Z=function(e){wp.deprecated("delLanguageSwitchBeforeListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.removeAction("qtranx.LanguageSwitchPre", ...)'});for(var n=0;n<E.saveFuncs.length;++n)if(E.saveFuncs[n]===e)return void E.saveFuncs.splice(n,1)},ee=function(e){wp.deprecated("addLanguageSwitchAfterListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitch", ...)'}),E.loadFuncs.push(e)},ne=function(e){wp.deprecated("delLanguageSwitchAfterListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.removeAction("qtranx.LanguageSwitch", ...)'});for(var n=0;n<E.loadFuncs.length;++n)if(E.loadFuncs[n]===e)return void E.loadFuncs.splice(n,1)},te=function(e){var n=e?"block":"none";for(var t in T){for(var a=T[t],i=0;i<a.length;++i){a[i].parentElement.style.display=n;break}break}},ae=function(){for(var e=document.getElementsByClassName("wrap"),n=0;n<e.length;++n){var t=e[n].getElementsByTagName("form");if(t.length)return t[0]}var a=document.getElementsByTagName("form");if(1===a.length)return a[0];for(var i=0;i<a.length;++i){var r=a[i];if(r.getElementsByClassName("wrap").length)return r}return null},ie=function(e,n){wp.deprecated("onLoadLanguage",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Internal function, should not be used."}),re(e,n)},re=function(e,n){for(var t=0;t<E.loadFuncs.length;++t)E.loadFuncs[t].call(qTranx.hooks,e,n)},oe=function(e){if(y===e||!c.isLanguageEnabled(e))return!1;if(y){wp.hooks.doAction("qtranx.languageSwitchPre",e,y);for(var n=!0,t=0;t<E.saveFuncs.length;++t)!1===E.saveFuncs[t].call(qTranx.hooks,y,e)&&(n=!1);if(!n)return!1;for(var a=T[y],i=0;i<a.length;++i)a[i].classList.remove(c.styles.lsb.activeClass),b(a[i]).find(".button").removeClass("active")}var r=y;I(e),b('input[name="qtranslate-edit-language"]').val(e);for(var o=T[y],s=0;s<o.length;++s)o[s].classList.add(c.styles.lsb.activeClass),b(o[s]).find(".button").addClass("active");!function(e){m(e);for(var n=x.length;--n>=0;){var t=x[n];t.nd.parentNode?t.nd.nodeValue=t.contents[e]:x.splice(n,1)}for(var a=k.length;--a>=0;){var i=k[a];i.nd.parentNode?i.nd.setAttribute(i.attr,i.contents[e]):k.splice(a,1)}if(!c.isEditorModeRAW())for(var r in C){var o=C[r],s=o.mce&&!o.mce.hidden;s&&o.mce.save();var l=o.contentField.value.trim(),d=g(l);if(!d||d.length<=1){o.fields[o.lang].value=l,o.lang=e;var u=o.fields[o.lang].value;o.contentField.placeholder&&""!==u&&(o.contentField.placeholder=""),o.contentField.value=u,b(o.contentField).trigger("change"),s&&P(o)}else{var p=f(d);for(var v in o.fields)o.fields[v].value=p[v];o.lang=e}}}(e);for(var l=0;l<E.actionFuncs.length;++l)E.actionFuncs[l].call(qTranx.hooks,e,r);return wp.hooks.doAction("qtranx.languageSwitch",e,r),re(e,r),!0},se=function(){wp.deprecated("clickSwitchLanguage",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Internal callback, should not be used."}),le.call(this)},le=function(){var e=b(this).hasClass("button")?this.parentNode:this,n=e.lang;n?b(".qtranxs-lang-switch-wrap").hasClass("copying")?(ge(n),b(e).find(".button").blur(),b(".qtranxs-lang-switch-wrap").removeClass("copying"),b(".qtranxs-lang-copy .button").removeClass("active")):oe(n):log.error("qTranslate-XT: This should not have happened: Please, report this incident to the developers: !lang")},de=function(){wp.deprecated("toggleCopyFrom",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Internal callback, should not be used."}),ce.call(this)},ce=function(){b(".qtranxs-lang-switch-wrap").toggleClass("copying"),b(".qtranxs-lang-copy .button").toggleClass("active"),b(".qtranxs-lang-switch-wrap").hasClass("copying")?b(".qtranxs-lang-switch").each(function(){b(this).attr("orig-title",b(this).attr("title")),b(this).attr("lang")===y?b(this).attr("title",c.l10n.CopyFromAlt):b(this).attr("title",c.l10n.CopyFrom+" [:"+b(this).attr("lang")+"]")}):b(".qtranxs-lang-switch").each(function(){b(this).attr("title",b(this).attr("orig-title"))})},ue=function(e){wp.deprecated("copyContentFrom",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Internal function, should not be used."}),ge.call(e)},ge=function(e){var n=y,t=!1;for(var a in C){var i=C[a],r=i.mce&&!i.mce.hidden,o=r?i.mce.getContent():i.contentField.value;o||(o=i.fields[e].value)&&(i.contentField.value=o,r&&P(i),t=!0)}t&&re(n,e)},fe=function(e){var n=p("ul",{className:"qtranxs-lang-switch-wrap "+e});for(var t in c.languages){var a=c.languages[t],i=c.l10n.ShowIn+a.admin_name+" [:"+t+"]",r=p("li",{lang:t,className:"qtranxs-lang-switch qtranxs-lang-switch-"+t,title:i,onclick:le},n),o=r;"button"===c.styles.lsb.subItem&&(o=p("button",{className:"button button-secondary",type:"button"},r)),p("img",{src:c.path.flags+a.flag},o),p("span",{innerHTML:a.name},o),y===t&&(r.classList.add(c.styles.lsb.activeClass),b(r).find(".button").addClass("active")),T[t]||(T[t]=[]),T[t].push(r)}if(!c.styles.lsb.hideCopyContent){var s=p("li",{className:"qtranxs-lang-copy"},n),l=p("button",{className:"button button-secondary",type:"button",title:c.l10n.CopyFromAlt,onclick:ce},s);p("span",{innerHTML:c.l10n.CopyFrom},l)}return n},pe=function(){return fe(c.styles.lsb.wrapClass+" widefat")},ve=function(){!q&&c.isEditorModeLSB()&&(x.length||k.length||Object.keys(C).length)&&(function(){var e=document.getElementById("qtranxs-meta-box-lsb");if(e){var n=e.getElementsByClassName("inside");if(n.length){e.classList.add("closed"),b(e).find(".hndle").remove();var t=document.createElement("span");e.insertBefore(t,n[0]),t.classList.add("hndle","ui-sortable-handle");var a=fe(c.styles.lsb.wrapClass);t.appendChild(a),b("#qtranxs-meta-box-lsb .hndle").off("click.postboxes")}}}(),function(e){var n=[];if(e)for(var t in e){var a=e[t],i=document.getElementById(t);if(i)n.push({target:i,where:a.where});else if(a.jquery)for(var r=b(a.jquery),o=0;o<r.length;++o){var s=r[o];n.push({target:s,where:a.where})}}if(!n.length){var l=ae();l&&n.push({target:l,where:"before"})}for(var d=0;d<n.length;++d){var c=n[d];if(!c.where||c.where.indexOf("before")>=0){var u=pe();c.target.parentNode.insertBefore(u,c.target)}if(c.where&&c.where.indexOf("after")>=0){var g=pe();c.target.parentNode.insertBefore(g,c.target.nextSibling)}if(c.where&&c.where.indexOf("first")>=0){var f=pe();c.target.insertBefore(f,c.target.firstChild)}if(c.where&&c.where.indexOf("last")>=0){var p=pe();c.target.insertBefore(p,null)}}}(c.page.i18n.anchors),q=!0)},me=function(){c.isEditorModeLSB()?(I(sessionStorage.getItem(v)),y&&c.isLanguageEnabled(y)||(I(c.page.detectedLang),c.isLanguageEnabled(y)?m(y):c.editorMode=c.enum.EditorMode.SINGLE)):(I(c.page.detectedLang),m(y)),function(e){for(var n in null!=e?e:[]){var t=e[n],a=void 0;if(t.form){if(t.form.id)a=document.getElementById(t.form.id);else if(t.form.jquery)a=b(t.form.jquery);else if(t.form.name){var i=document.getElementsByName(t.form.name);i&&i.length&&(a=i[0])}}else a=document.getElementById(n);for(var r in a||(a=ae())||(a=document),t.fields){var o=t.fields[r],s=[];if(o.container_id){var l=document.getElementById(o.container_id);l&&s.push(l)}else o.container_jquery?s=b(o.container_jquery):o.container_class?s=document.getElementsByClassName(o.container_class):s.push(a);var d=o.encode;switch(d){case"none":break;case"display":if(o.jquery)for(var c=0;c<s.length;++c){var u=s[c],g=b(u).find(o.jquery);o.attrs?Q(g,o.attrs):D(g)}else{var f=o.id?o.id:r,p=document.getElementById(f);o.attrs?W(p,o.attrs):R(p)}break;default:if(o.jquery)for(var v=0;v<s.length;++v){var m=s[v],h=b(m).find(o.jquery);S(h,d,o.name)}else{var w=o.id?o.id:r;N(document.getElementById(w),d,o.name)}}}}}(c.page.i18n.forms),U(c.page.i18n._custom),S(b(".i18n-multilingual"),"["),S(b(".i18n-multilingual-curly"),"{"),S(b(".i18n-multilingual-term"),"term"),S(b(".i18n-multilingual-slug"),"slug"),D(b(".i18n-multilingual-display")),z(),ve()},he=jQuery;he(window).on("load",function(){me(),G(),wp.hooks.doAction("qtranx.load"),c.page.i18n.keys.forEach(function(e){he(document).trigger("qtxLoadAdmin:"+e,[qTranx.hooks,"Deprecated event 'qtxLoadAdmin', use wp.hooks.addAction('qtranx.load', namespace, callback) instead."])})});var we=function(){return wp.deprecated("getLanguages",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.config.languages"}),c.languages},ye=function(){return wp.deprecated("getFlagLocation",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.config.path.flags"}),c.path.flags},be=function(e){return wp.deprecated("isLanguageEnabled",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.config.isLanguageEnabled"}),c.isLanguageEnabled(e)},Ce=function(e){return wp.deprecated("addContentHookC",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'addContentHook(inputField, "<"))',hint:"Comment separators are not supported in addContentHookC since 3.2.9.8.5."}),N(e,"[")},xe=function(e){return wp.deprecated("addContentHookB",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHook",hint:"Bracket separator is the default."}),N(e,"[")},ke=function(e,n,t){return wp.deprecated("addContentHookId",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHook(document.getElementById(id), sep, name)"}),N(document.getElementById(e),n,t)},qe=function(e){wp.deprecated("addContentHookByIdName",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHook(document.getElementById(nameWithoutSeparator),container,sep)",hint:"Only meant for custom fields (separator extracted from name), now handled internally."});var n="[";switch(e[0]){case"<":case"[":n=e.substring(0,1),e=e.substring(1)}return N(document.getElementById(e),n)},Te=function(e){return wp.deprecated("addContentHookByIdC",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'addContentHook(document.getElementById(id), "<")',hint:"Comment separators are not supported in addContentHookByIdC since 3.2.9.8.5."}),N(document.getElementById(e),"[")},Ee=function(e){return wp.deprecated("addContentHookByIdB",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHook(document.getElementById(id))",hint:"Bracket separator is the default and id prop is used first for selection."}),N(document.getElementById(e),"[")},Be=function(e,n,t){wp.deprecated("addContentHooksByTagInClass",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'addContentHooks($(container).find("." + name + " " + tag));',hint:"Select items by class name then sub-items by tag."}),S($(t).find("."+e+" "+n))},Ie=function(e){return wp.deprecated("addDisplayHookById",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addDisplayHook(document.getElementById(id))"}),R(document.getElementById(e))},Le=function(e,n){wp.deprecated("addDisplayHooksByClass",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addDisplayHooks(container.getElementsByClassName(name))"}),D(n.getElementsByClassName(elems))},Ae=function(e,n,t){wp.deprecated("addDisplayHooksByTagInClass",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'addDisplayHooks($(container).find("." + name + " " + tag)',hint:"Select items by class name then sub-items by tag."}),D($(t).find("."+e+" "+n))},Ne=jQuery,Se=jQuery,He=jQuery,Me=function(e,n){var t=window.qTranslateConfig;switch(c._urlMode){case l.QUERY:e.search?e.search+="&lang="+n:e.search="?lang="+n;break;case l.PATH:var a=t.home_url_path,i=e.pathname;"/"!==i[0]&&(i="/"+i);var r=i.indexOf(a);r>=0&&(e.pathname=t.homeinfo_path+n+i.substring(r+a.length-1));break;case l.DOMAIN:e.host=n+"."+e.host;break;case l.DOMAINS:e.host=t.domains[n]}},_e=jQuery;c.isPageActive("edit-tags")&&wp.hooks.addAction("qtranx.load","qtranx/pages/edit-tags",function(){var e=function(e,n){R(n)},n=function(n){var t=Ne(n);t.find(".row-title, .description").each(e),t.find("td.name span.inline").css("display","none")},t=Ne("#the-list"),a=Ne("#the-list > tr").length,i=function(){var e=t.children();if(a===e.length)return!1;var i=a>e.length;if(a=e.length,i)return!1;for(var r=0;r<e.length;++r){var o=e[r];n(o)}return!1};t.each(function(e,n){Ne(n).on("DOMSubtreeModified",i)}),Ne("#the-list > tr > td.name span.inline").css("display","none")}),c.isPageActive("nav-menus")&&wp.hooks.addAction("qtranx.load","qtranx/pages/nav-menus",function(){var e=function(e){S(Se(e).find(".edit-menu-item-title,.edit-menu-item-attr-title,.edit-menu-item-description")),D(Se(e).find(".menu-item-title,.link-to-original A"))},n=function(n){for(var t,a=/id="menu-item-(\d+)"/gi;t=a.exec(n);){var i="menu-item-"+t[1],r=document.getElementById(i);r&&e(r)}};if(wpNavMenu){var t=wpNavMenu.addMenuItemToBottom;"function"==typeof t&&(wpNavMenu.addMenuItemToBottom=function(e,a){t(e,a),n(e)}),"function"==typeof wp_addMenuItemToTop&&(wpNavMenu.addMenuItemToTop=function(e){wp_addMenuItemToTop(e),n(e)})}var a=function(e){wpNavMenu&&("function"==typeof wpNavMenu.refreshKeyboardAccessibility&&wpNavMenu.refreshKeyboardAccessibility(),"function"==typeof wpNavMenu.refreshAdvancedAccessibility&&wpNavMenu.refreshAdvancedAccessibility())};a(),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/nav-menus",a)}),c.isPageActive("post")&&wp.hooks.addAction("qtranx.load","qtranx/pages/post",function(){var e,n,t,a,i,r,o,s=function(s){if(!e){var d=document.getElementById("view-post-btn");if(!d||!d.children.length)return;if("A"!==(e=d.children[0]).tagName)return;n=e.href,t=p("a",{}),n.search(/\?/)}t.href=n,Me(t,s),e.href=t.href;var u=document.getElementById("preview-action");if(u&&u.children.length&&(u.children[0].href=t.href),c._urlMode!==l.QUERY){if(!a){var g=document.getElementById("sample-permalink");g&&g.offsetHeight>0&&g.childNodes.length&&(a=g.childNodes[0],i=a.nodeValue)}a&&(t.href=i,Me(t,s),a.nodeValue=t.href)}else o||(He("#sample-permalink").append('<span id="sample-permalink-lang-query"></span>'),o=He("#sample-permalink-lang-query")),o&&o.text((n.search(/\?/)<0?"/?lang=":"&lang=")+s);r||(r=document.getElementById("wp-admin-bar-view")),r&&r.children.length&&(r.children[0].href=e.href)},d=He("#title"),u=He("#title-prompt-text");function g(e){for(var n={},t=("?"===e[0]?e.substr(1):e).split("&"),a=0;a<t.length;a++){var i=t[a].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}return n}for(var f in s(B()),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/post",function(e){s(e),u&&d&&(d.val()?u.addClass("screen-reader-text"):u.removeClass("screen-reader-text"))}),c.languages)He("#wp-admin-bar-"+f+" a").on("click",function(e){e.preventDefault();var n=g(window.location.search),t=He(this).attr("rel");n.lang=t,window.location=window.location.origin+window.location.pathname+"?"+He.param(n)})}),c.isPageActive("widgets")&&wp.hooks.addAction("qtranx.load","qtranx/pages/widgets",function(){if(window.wpWidgets){jQuery(document).on("tinymce-editor-init",function(e,n){var t=_e(n.settings.selector).parents(".widget"),a=t.find(".widget-id").val(),i="widget-"+a+"-title";t.find(".text-widget-fields input[id$='_title']").each(function(e,n){A(n,i)}),Y(n,"widget-"+a+"-text")});var e=function(e,n){if("text"===n.find(".id_base").val()){var t=n.find(".widget-id").val(),a=n.find(".text-widget-fields input[id$='_title']");n.find(".widget-content input[id^='widget-text-'][id$='-title']").each(function(e,n){_(n),A(a[0],n.id)});var i=n.find(".text-widget-fields textarea[id$='_text']"),r=window.tinyMCE.get(i[0].id);n.find(".widget-content textarea[id^='widget-text-'][id$='-text']").each(function(e,t){if(_(t),r){Y(r,t.id);var a=n.find(".sync-input.text");i.val(a.val()+"*")}}),t in wp.textWidgets.widgetControls&&wp.textWidgets.widgetControls[t].updateFields()}else n.find(".widget-content input[id^='widget-'][id$='-title']").each(function(e,n){_(n)});wpWidgets.appendTitle(n)};_e(document).on("widget-added",function(n,t){e(0,t),ve()}),_e(document).on("widget-updated",e),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/widgets",function(){_e("#widgets-right .widget").each(function(){wpWidgets.appendTitle(this)})})}}),window.qTranslateConfig.qtx=a,qTranslateConfig.js.get_qtx=function(){return wp.deprecated("qTranslateConfig.js.get_qtx",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.hooks",hint:"See release notes to use new API."}),qTranx.hooks},qTranx=n})();