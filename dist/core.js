var qTranx;(()=>{"use strict";var e={d:(n,t)=>{for(var a in t)e.o(t,a)&&!e.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{config:()=>c,hooks:()=>a,ml:()=>t});var t={};e.r(t),e.d(t,{parseTokens:()=>f,splitLangs:()=>u,splitTokens:()=>g});var a={};e.r(a),e.d(a,{_addCustomContentHooks:()=>z,addContentHook:()=>M,addContentHookB:()=>Te,addContentHookById:()=>Ee,addContentHookByIdB:()=>Ae,addContentHookByIdC:()=>Ie,addContentHookByIdName:()=>Be,addContentHookC:()=>ke,addContentHooks:()=>_,addContentHooksByClass:()=>O,addContentHooksByTagInClass:()=>Le,addContentHooksTinyMCE:()=>J,addCustomContentHooks:()=>G,addDisplayHook:()=>W,addDisplayHookAttrs:()=>V,addDisplayHookById:()=>Ne,addDisplayHooks:()=>U,addDisplayHooksAttrs:()=>Y,addDisplayHooksByClass:()=>Se,addDisplayHooksByTagInClass:()=>He,addLanguageSwitchAfterListener:()=>ae,addLanguageSwitchBeforeListener:()=>ne,addLanguageSwitchListener:()=>ee,attachContentHook:()=>H,attachEditorHook:()=>K,clickSwitchLanguage:()=>ce,copyContentFrom:()=>pe,createSetOfLSB:()=>he,createSetOfLSBwith:()=>me,delLanguageSwitchAfterListener:()=>ie,delLanguageSwitchBeforeListener:()=>te,enableLanguageSwitchingButtons:()=>re,getActiveLanguage:()=>L,getFlagLocation:()=>xe,getLanguages:()=>Ce,hasContentHook:()=>S,init:()=>ye,isLanguageEnabled:()=>qe,loadAdditionalTinyMceHooks:()=>Z,onLoadLanguage:()=>se,refreshContentHook:()=>X,removeContentHook:()=>j,setupLanguageSwitch:()=>we,switchActiveLanguage:()=>de,toggleCopyFrom:()=>ge});var i,r,o,s=Object.freeze({LSB:0,RAW:1,SINGLE:2}),l=Object.freeze({QUERY:1,PATH:2,DOMAIN:3,DOMAINS:4}),d=window.qTranslateConfig,c={editorMode:null==d?void 0:d.editorMode,enum:{EditorMode:s},i18n:{anchors:null==d||null===(i=d.page_config)||void 0===i?void 0:i.anchors,forms:null==d||null===(r=d.page_config)||void 0===r?void 0:r.forms,keys:null==d||null===(o=d.page_config)||void 0===o?void 0:o.keys},lang:{default:null==d?void 0:d.default_language,detected:d.language,formatRegex:null==d?void 0:d.lang_code_format},languages:d.language_config,l10n:null==d?void 0:d.strings,path:{flags:null==d?void 0:d.flag_location},styles:{lsb:{activeClass:null==d?void 0:d.lsb_style_active_class,subItem:null==d?void 0:d.lsb_style_subitem,wrapClass:null==d?void 0:d.lsb_style_wrap_class,hideCopyContent:null==d?void 0:d.hide_lsb_copy_content}},isLanguageEnabled:function(e){return!!this.languages[e]},isPageActive:function(e){var n;return(null===(n=this.i18n.keys)||void 0===n?void 0:n.indexOf(e))>=0},isEditorModeRAW:function(){return this.editorMode==s.RAW},isEditorModeLSB:function(){return this.editorMode==s.LSB},_raw:d};c.i18n._custom={classes:null==d?void 0:d.custom_field_classes,ids:null==d?void 0:d.custom_fields},c._urlMode=null==d?void 0:d.url_mode;var u=function(e){var n=g(e);return f(n)},g=function(e){var n="(\x3c!--:lang--\x3e|\x3c!--:--\x3e|\\[:lang]|\\[:]|{:lang}|{:})".replace(/lang/g,c.lang.formatRegex),t=new RegExp(n,"gi");return e.split(t)},f=function(e){var n=new Object;for(var t in c.languages)n[t]="";if(!e||!e.length)return n;if(1===e.length){var a=e[0];for(var i in c.languages)n[i]+=a;return n}for(var r,o=new RegExp("\x3c!--:(lang)--\x3e".replace(/lang/g,c.lang.formatRegex),"gi"),s=new RegExp("\\[:(lang)]".replace(/lang/g,c.lang.formatRegex),"gi"),l=new RegExp("{:(lang)}".replace(/lang/g,c.lang.formatRegex),"gi"),d=!1,u=0;u<e.length;++u){var g=e[u];if(g.length)if(r=o.exec(g),o.lastIndex=0,null==r)if(r=s.exec(g),s.lastIndex=0,null==r)if(r=l.exec(g),l.lastIndex=0,null==r)if("\x3c!--:--\x3e"!==g&&"[:]"!==g&&"{:}"!==g)if(d)n[d]?n[d]+=g:n[d]=g,d=!1;else for(var f in n)n[f]+=g;else d=!1;else d=r[1];else d=r[1];else d=r[1]}return n},p=function(e,n,t,a){var i=document.createElement(e);if(n)for(var r in n)i[r]=n[r];return t&&("boolean"==typeof a&&a&&(console.warn("qTranslate: deprecated boolean type in domCreateElement, will be removed in future major release."),a=t.firstChild),t.insertBefore(i,a)),i},v="qtranslate-xt-admin-edit-language",m=function(e){try{sessionStorage.setItem(v,e)}catch(e){console.log('Failed to store "'+v+'" with sessionStorage',e)}};function h(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return w(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw r}}}}function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}var y,b=jQuery,C=window.qTranslateConfig,x={},q=[],k=[],T=!1,E={},B=[],I=[],A=[],L=function(){return y},N=function(e){y=e,C.activeLanguage=e},S=function(e){return x[e]},H=function(e,n){var t=x[n||e.id];t&&(e.classList.add("qtranxs-translatable"),t.contentField=e)},M=function(e,n,t){if(!e)return!1;switch(e.tagName){case"TEXTAREA":break;case"INPUT":switch(e.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!t){if(!e.name)return console.error("Missing name in field",e),!1;t=e.name}if(e.id){if(x[e.id]){if(b.contains(document,e))return x[e.id];console.warn("No input field with id=",e.id),j(e)}}else if(x[t]){var a=0;do{++a,e.id=t+a}while(x[e.id])}else e.id=t;var i,r,o,s=x[e.id]={};if(s.name=t,s.lang=y,H(e),n)switch(n){case"slug":i="qtranslate-slugs[";break;case"term":i="qtranslate-terms[";break;default:i="qtranslate-fields["}else n="[",i="qtranslate-fields[";s.encode=n;var l=s.name.indexOf("[");if(l<0)r=i+s.name+"]";else if(r=i+s.name.substring(0,l)+"]",s.name.lastIndexOf("[]")<0)r+=s.name.substring(l);else{var d=s.name.length-2;d>l&&(r+=s.name.substring(l,d)),o="[]"}var g=b(e).attr("form"),f=void 0!==g?b("#"+g):b(e).closest("form");if(f.length){var v,m=f[0];if(s.fields={},!c.isEditorModeRAW()){for(var h in v=u(e.value),e.value=v[s.lang],v){var w=v[h],C=r+"["+h+"]";o&&(C+=o);var q=p("input",{name:C,type:"hidden",className:"hidden",value:w},e.parentNode,e);void 0!==g&&b(q).attr("form",g),s.fields[h]=q}f.find('input[name="qtranslate-edit-language"]').length||p("input",{type:"hidden",name:"qtranslate-edit-language",value:y},m,m.firstChild)}switch(n){case"slug":case"term":c.isEditorModeRAW()&&(v=u(e.value)),s.sepfield=p("input",{name:r+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:v[c.lang.default]},e.parentNode,e);break;default:c.isEditorModeRAW()||(s.sepfield=p("input",{name:r+"[qtranslate-separator]",type:"hidden",className:"hidden",value:n},e.parentNode,e))}return s.sepfield&&void 0!==g&&b(s.sepfield).attr("form",g),s}console.error("No form found for translatable field id=",e.id)},_=function(e,n,t){for(var a=0;a<e.length;++a){var i=e[a];M(i,n,t)}},O=function(e,n){wp.deprecated("addContentHooksByClass",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHooks(container.getElementsByClassName(nameWithoutSeparator),container,sep)",hint:"Only meant for custom fields (separator extracted from name), now handled internally."});var t="[";0!==e.indexOf("<")&&0!==e.indexOf("[")||(t=e.substring(0,1),e=e.substring(1)),function(e,n,t){n||(n=document);var a=n.getElementsByClassName(e);_(a,t)}(e,n,t)},j=function(e){if(!e||!e.id)return!1;var n=x[e.id];if(!n)return!1;for(var t in n.sepfield&&b(n.sepfield).remove(),n.fields){var a=n.fields[t];b(a).remove()}if(n.mce){var i=n.mce;i.getContentAreaContainer().classList.remove("qtranxs-translatable"),i.getElement().classList.remove("qtranxs-translatable")}return n.contentField.classList.remove("qtranxs-translatable"),delete x[e.id],e.classList.remove("qtranxs-translatable"),!0},X=function(e){return j(e),M(e)},F=function(e){if(e[c.lang.detected])return"("+c.lang.detected+") "+e[c.lang.detected];if(e[c.lang.default])return"("+c.lang.default+") "+e[c.lang.default];for(var n in e)if(e[n])return"("+n+") "+e[n];return""},R=function(e){var n=null;for(var t in e)e[t]||(n||(n=F(e)),e[t]=n)},P=function(e){if(!e.nodeValue)return 0;var n=g(e.nodeValue);if(!n||!n.length||1===n.length)return 0;var t={};return t.nd=e,t.contents=f(n),R(t.contents),e.nodeValue=t.contents[y],q.push(t),1},D=function(e,n){if(!e.hasAttribute(n))return 0;var t=e.getAttribute(n),a=g(t);if(!a||!a.length||1===a.length)return 0;var i={};return i.nd=e,i.attr=n,i.contents=f(a),R(i.contents),e.setAttribute(n,i.contents[y]),k.push(i),1},W=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":return"submit"===e.type&&e.value?D(e,"value"):0}var n=0;if(e.childNodes&&e.childNodes.length)for(var t=0;t<e.childNodes.length;++t){var a=e.childNodes[t];switch(a.nodeType){case 1:n+=W(a);break;case 2:case 3:n+=P(a)}}return n},Q=function(e){var n=e.contentField.value;e.mce.settings.wpautop&&window.switchEditors&&(n=window.switchEditors.wpautop(n)),e.mce.setContent(n)},U=function(e){for(var n=0;n<e.length;++n){var t=e[n];W(t)}},V=function(e,n){for(var t=0;t<n.length;++t){var a=n[t];D(e,a)}},Y=function(e,n){for(var t=0;t<e.length;++t){var a=e[t];V(a,n)}},z=function(){var e,n,t,a,i,r=function(e){var n=0===e.indexOf("<")||0===e.indexOf("[");return{sep:n?e.substring(0,1):"[",name:n?e.substring(1):e}},o=h(null!==(e=null===(n=c.i18n._custom)||void 0===n?void 0:n.ids)&&void 0!==e?e:[]);try{for(o.s();!(i=o.n()).done;){var s=r(i.value);M(document.getElementById(s.name),s.sep)}}catch(e){o.e(e)}finally{o.f()}var l,d=h(null!==(t=null===(a=c.i18n._custom)||void 0===a?void 0:a.classes)&&void 0!==t?t:[]);try{for(d.s();!(l=d.n()).done;){var u=r(l.value);_(document.getElementsByClassName(u.name),u.sep)}}catch(e){d.e(e)}finally{d.f()}},G=function(){wp.deprecated("addCustomContentHooks",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Custom fields are handled internally."}),z(),J()},K=function(e,n){if(!e.id)return null;n||(n=e.id);var t=x[n];return t?(n!==e.id&&(t.contentField=document.getElementById(e.id)),t.mce||(t.mce=e,e.getContentAreaContainer().classList.add("qtranxs-translatable"),e.getElement().classList.add("qtranxs-translatable")),t):null},J=function(){if(window.tinyMCEPreInit&&!c.isEditorModeRAW())for(var e in x){var n=x[e];"TEXTAREA"!==n.contentField.tagName||n.mce||n.mceInit||!tinyMCEPreInit.mceInit[e]||(n.mceInit=tinyMCEPreInit.mceInit[e],tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){K(e)})}},Z=function(){window.tinyMCE&&tinyMCE.get().forEach(function(e){K(e)})},ee=function(e){wp.deprecated("addLanguageSwitchListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitch", ...)'}),B.push(e)},ne=function(e){wp.deprecated("addLanguageSwitchBeforeListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitchPre", ...)'}),A.push(e)},te=function(e){wp.deprecated("delLanguageSwitchBeforeListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.removeAction("qtranx.LanguageSwitchPre", ...)'});for(var n=0;n<A.length;++n)if(A[n]===e)return void A.splice(n,1)},ae=function(e){wp.deprecated("addLanguageSwitchAfterListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitch", ...)'}),I.push(e)},ie=function(e){wp.deprecated("delLanguageSwitchAfterListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.removeAction("qtranx.LanguageSwitch", ...)'});for(var n=0;n<I.length;++n)if(I[n]===e)return void I.splice(n,1)},re=function(e){var n=e?"block":"none";for(var t in E){for(var a=E[t],i=0;i<a.length;++i){a[i].parentElement.style.display=n;break}break}},oe=function(){for(var e=document.getElementsByClassName("wrap"),n=0;n<e.length;++n){var t=e[n].getElementsByTagName("form");if(t.length)return t[0]}var a=document.getElementsByTagName("form");if(1===a.length)return a[0];for(var i=0;i<a.length;++i){var r=a[i];if(r.getElementsByClassName("wrap").length)return r}return null},se=function(e,n){wp.deprecated("onLoadLanguage",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Internal function, should not be used."}),le(e,n)},le=function(e,n){for(var t=0;t<I.length;++t)I[t].call(qTranx.hooks,e,n)},de=function(e){if(y!==e){if(y){wp.hooks.doAction("qtranx.languageSwitchPre",e,y);for(var n=!0,t=0;t<A.length;++t)!1===A[t].call(qTranx.hooks,y,e)&&(n=!1);if(!n)return;for(var a=E[y],i=0;i<a.length;++i)a[i].classList.remove(c.styles.lsb.activeClass),b(a[i]).find(".button").removeClass("active")}var r=y;N(e),b('input[name="qtranslate-edit-language"]').val(e);for(var o=E[y],s=0;s<o.length;++s)o[s].classList.add(c.styles.lsb.activeClass),b(o[s]).find(".button").addClass("active");!function(e){m(e);for(var n=q.length;--n>=0;){var t=q[n];t.nd.parentNode?t.nd.nodeValue=t.contents[e]:q.splice(n,1)}for(var a=k.length;--a>=0;){var i=k[a];i.nd.parentNode?i.nd.setAttribute(i.attr,i.contents[e]):k.splice(a,1)}if(!c.isEditorModeRAW())for(var r in x){var o=x[r],s=o.mce&&!o.mce.hidden;s&&o.mce.save();var l=o.contentField.value.trim(),d=g(l);if(!d||d.length<=1){o.fields[o.lang].value=l,o.lang=e;var u=o.fields[o.lang].value;o.contentField.placeholder&&""!==u&&(o.contentField.placeholder=""),o.contentField.value=u,b(o.contentField).trigger("change"),s&&Q(o)}else{var p=f(d);for(var v in o.fields)o.fields[v].value=p[v];o.lang=e}}}(e);for(var l=0;l<B.length;++l)B[l].call(qTranx.hooks,e,r);wp.hooks.doAction("qtranx.languageSwitch",e,r),le(e,r)}},ce=function(){wp.deprecated("clickSwitchLanguage",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Internal callback, should not be used."}),ue.call(this)},ue=function(){var e=b(this).hasClass("button")?this.parentNode:this,n=e.lang;n?b(".qtranxs-lang-switch-wrap").hasClass("copying")?(ve(n),b(e).find(".button").blur(),b(".qtranxs-lang-switch-wrap").removeClass("copying"),b(".qtranxs-lang-copy .button").removeClass("active")):de(n):log.error("qTranslate-XT: This should not have happened: Please, report this incident to the developers: !lang")},ge=function(){wp.deprecated("toggleCopyFrom",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Internal callback, should not be used."}),fe.call(this)},fe=function(){b(".qtranxs-lang-switch-wrap").toggleClass("copying"),b(".qtranxs-lang-copy .button").toggleClass("active"),b(".qtranxs-lang-switch-wrap").hasClass("copying")?b(".qtranxs-lang-switch").each(function(){b(this).attr("orig-title",b(this).attr("title")),b(this).attr("lang")===y?b(this).attr("title",c.l10n.CopyFromAlt):b(this).attr("title",c.l10n.CopyFrom+" [:"+b(this).attr("lang")+"]")}):b(".qtranxs-lang-switch").each(function(){b(this).attr("title",b(this).attr("orig-title"))})},pe=function(e){wp.deprecated("copyContentFrom",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",hint:"Internal function, should not be used."}),ve.call(e)},ve=function(e){var n=y,t=!1;for(var a in x){var i=x[a],r=i.mce&&!i.mce.hidden,o=r?i.mce.getContent():i.contentField.value;o||(o=i.fields[e].value)&&(i.contentField.value=o,r&&Q(i),t=!0)}t&&le(n,e)},me=function(e){var n=p("ul",{className:"qtranxs-lang-switch-wrap "+e});for(var t in c.languages){var a=c.languages[t],i=c.l10n.ShowIn+a.admin_name+" [:"+t+"]",r=p("li",{lang:t,className:"qtranxs-lang-switch qtranxs-lang-switch-"+t,title:i,onclick:ue},n),o=r;"button"===c.styles.lsb.subItem&&(o=p("button",{className:"button button-secondary",type:"button"},r)),p("img",{src:c.path.flags+a.flag},o),p("span",{innerHTML:a.name},o),y===t&&(r.classList.add(c.styles.lsb.activeClass),b(r).find(".button").addClass("active")),E[t]||(E[t]=[]),E[t].push(r)}if(!c.styles.lsb.hideCopyContent){var s=p("li",{className:"qtranxs-lang-copy"},n),l=p("button",{className:"button button-secondary",type:"button",title:c.l10n.CopyFromAlt,onclick:fe},s);p("span",{innerHTML:c.l10n.CopyFrom},l)}return n},he=function(){return me(c.styles.lsb.wrapClass+" widefat")},we=function(){!T&&c.isEditorModeLSB()&&(q.length||k.length||Object.keys(x).length)&&(function(){var e=document.getElementById("qtranxs-meta-box-lsb");if(e){var n=e.getElementsByClassName("inside");if(n.length){e.classList.add("closed"),b(e).find(".hndle").remove();var t=document.createElement("span");e.insertBefore(t,n[0]),t.classList.add("hndle","ui-sortable-handle");var a=me(c.styles.lsb.wrapClass);t.appendChild(a),b("#qtranxs-meta-box-lsb .hndle").off("click.postboxes")}}}(),function(){var e=[];if(c.i18n.anchors)for(var n in c.i18n.anchors){var t=c.i18n.anchors[n],a=document.getElementById(n);if(a)e.push({target:a,where:t.where});else if(t.jquery)for(var i=b(t.jquery),r=0;r<i.length;++r){var o=i[r];e.push({target:o,where:t.where})}}if(!e.length){var s=oe();s&&e.push({target:s,where:"before"})}for(var l=0;l<e.length;++l){var d=e[l];if(!d.where||d.where.indexOf("before")>=0){var u=he();d.target.parentNode.insertBefore(u,d.target)}if(d.where&&d.where.indexOf("after")>=0){var g=he();d.target.parentNode.insertBefore(g,d.target.nextSibling)}if(d.where&&d.where.indexOf("first")>=0){var f=he();d.target.insertBefore(f,d.target.firstChild)}if(d.where&&d.where.indexOf("last")>=0){var p=he();d.target.insertBefore(p,null)}}}(),T=!0)},ye=function(){c.isEditorModeLSB()?(N(sessionStorage.getItem(v)),y&&c.isLanguageEnabled(y)||(N(c.lang.detected),c.isLanguageEnabled(y)?m(y):c.editorMode=c.enum.EditorMode.SINGLE)):(N(c.lang.detected),m(y)),function(){var e,n=null!==(e=c.i18n.forms)&&void 0!==e?e:[];for(var t in n){var a=n[t],i=void 0;if(a.form){if(a.form.id)i=document.getElementById(a.form.id);else if(a.form.jquery)i=b(a.form.jquery);else if(a.form.name){var r=document.getElementsByName(a.form.name);r&&r.length&&(i=r[0])}}else i=document.getElementById(t);for(var o in i||(i=oe())||(i=document),a.fields){var s=a.fields[o],l=[];if(s.container_id){var d=document.getElementById(s.container_id);d&&l.push(d)}else s.container_jquery?l=b(s.container_jquery):s.container_class?l=document.getElementsByClassName(s.container_class):l.push(i);var u=s.encode;switch(u){case"none":break;case"display":if(s.jquery)for(var g=0;g<l.length;++g){var f=l[g],p=b(f).find(s.jquery);s.attrs?Y(p,s.attrs):U(p)}else{var v=s.id?s.id:o,m=document.getElementById(v);s.attrs?V(m,s.attrs):W(m)}break;default:if(s.jquery)for(var h=0;h<l.length;++h){var w=l[h],y=b(w).find(s.jquery);_(y,u,s.name)}else{var C=s.id?s.id:o;M(document.getElementById(C),u,s.name)}}}}}(),z(),b(".i18n-multilingual").each(function(e,n){M(n,"[")}),b(".i18n-multilingual-curly").each(function(e,n){M(n,"{")}),b(".i18n-multilingual-term").each(function(e,n){M(n,"term")}),b(".i18n-multilingual-slug").each(function(e,n){M(n,"slug")}),b(".i18n-multilingual-display").each(function(e,n){W(n)}),J(),we()},be=jQuery;be(window).on("load",function(){ye(),Z(),wp.hooks.doAction("qtranx.load"),c.i18n.keys.forEach(function(e){be(document).trigger("qtxLoadAdmin:"+e,[qTranx.hooks,"Deprecated event 'qtxLoadAdmin', use wp.hooks.addAction('qtranx.load', namespace, callback) instead."])})});var Ce=function(){return wp.deprecated("getLanguages",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.config.languages"}),c.languages},xe=function(){return wp.deprecated("getFlagLocation",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.config.path.flags"}),c.path.flags},qe=function(e){return wp.deprecated("isLanguageEnabled",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.config.isLanguageEnabled"}),c.isLanguageEnabled(e)},ke=function(e){return wp.deprecated("addContentHookC",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'addContentHook(inputField, "<"))',hint:"Comment separators are not supported in addContentHookC since 3.2.9.8.5."}),M(e,"[")},Te=function(e){return wp.deprecated("addContentHookB",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHook",hint:"Bracket separator is the default."}),M(e,"[")},Ee=function(e,n,t){return wp.deprecated("addContentHookId",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHook(document.getElementById(id), sep, name)"}),M(document.getElementById(e),n,t)},Be=function(e){wp.deprecated("addContentHookByIdName",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHook(document.getElementById(nameWithoutSeparator),container,sep)",hint:"Only meant for custom fields (separator extracted from name), now handled internally."});var n="[";switch(e[0]){case"<":case"[":n=e.substring(0,1),e=e.substring(1)}return M(document.getElementById(e),n)},Ie=function(e){return wp.deprecated("addContentHookByIdC",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'addContentHook(document.getElementById(id), "<")',hint:"Comment separators are not supported in addContentHookByIdC since 3.2.9.8.5."}),M(document.getElementById(e),"[")},Ae=function(e){return wp.deprecated("addContentHookByIdB",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addContentHook(document.getElementById(id))",hint:"Bracket separator is the default and id prop is used first for selection."}),M(document.getElementById(e),"[")},Le=function(e,n,t){wp.deprecated("addContentHooksByTagInClass",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'addContentHooks($(container).find("." + name + " " + tag));',hint:"Select items by class name then sub-items by tag."}),_($(t).find("."+e+" "+n))},Ne=function(e){return wp.deprecated("addDisplayHookById",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addDisplayHook(document.getElementById(id))"}),W(document.getElementById(e))},Se=function(e,n){wp.deprecated("addDisplayHooksByClass",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"addDisplayHooks(container.getElementsByClassName(name))"}),U(n.getElementsByClassName(elems))},He=function(e,n,t){wp.deprecated("addDisplayHooksByTagInClass",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'addDisplayHooks($(container).find("." + name + " " + tag)',hint:"Select items by class name then sub-items by tag."}),U($(t).find("."+e+" "+n))},Me=jQuery,_e=jQuery,Oe=jQuery,je=function(e,n){var t=window.qTranslateConfig;switch(c._urlMode){case l.QUERY:e.search?e.search+="&lang="+n:e.search="?lang="+n;break;case l.PATH:var a=t.home_url_path,i=e.pathname;"/"!==i[0]&&(i="/"+i);var r=i.indexOf(a);r>=0&&(e.pathname=t.homeinfo_path+n+i.substring(r+a.length-1));break;case l.DOMAIN:e.host=n+"."+e.host;break;case l.DOMAINS:e.host=t.domains[n]}},Xe=jQuery;c.isPageActive("edit-tags")&&wp.hooks.addAction("qtranx.load","qtranx/pages/edit-tags",function(){var e=function(e,n){W(n)},n=function(n){var t=Me(n);t.find(".row-title, .description").each(e),t.find("td.name span.inline").css("display","none")},t=Me("#the-list"),a=Me("#the-list > tr").length,i=function(){var e=t.children();if(a===e.length)return!1;var i=a>e.length;if(a=e.length,i)return!1;for(var r=0;r<e.length;++r){var o=e[r];n(o)}return!1};t.each(function(e,n){Me(n).on("DOMSubtreeModified",i)}),Me("#the-list > tr > td.name span.inline").css("display","none")}),c.isPageActive("nav-menus")&&wp.hooks.addAction("qtranx.load","qtranx/pages/nav-menus",function(){var e=function(e){_(_e(e).find(".edit-menu-item-title,.edit-menu-item-attr-title,.edit-menu-item-description")),U(_e(e).find(".menu-item-title,.link-to-original A"))},n=function(n){for(var t,a=/id="menu-item-(\d+)"/gi;t=a.exec(n);){var i="menu-item-"+t[1],r=document.getElementById(i);r&&e(r)}};if(wpNavMenu){var t=wpNavMenu.addMenuItemToBottom;"function"==typeof t&&(wpNavMenu.addMenuItemToBottom=function(e,a){t(e,a),n(e)}),"function"==typeof wp_addMenuItemToTop&&(wpNavMenu.addMenuItemToTop=function(e){wp_addMenuItemToTop(e),n(e)})}var a=function(e){wpNavMenu&&("function"==typeof wpNavMenu.refreshKeyboardAccessibility&&wpNavMenu.refreshKeyboardAccessibility(),"function"==typeof wpNavMenu.refreshAdvancedAccessibility&&wpNavMenu.refreshAdvancedAccessibility())};a(),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/nav-menus",a)}),c.isPageActive("post")&&wp.hooks.addAction("qtranx.load","qtranx/pages/post",function(){var e,n,t,a,i,r,o,s=function(s){if(!e){var d=document.getElementById("view-post-btn");if(!d||!d.children.length)return;if("A"!==(e=d.children[0]).tagName)return;n=e.href,t=p("a",{}),n.search(/\?/)}t.href=n,je(t,s),e.href=t.href;var u=document.getElementById("preview-action");if(u&&u.children.length&&(u.children[0].href=t.href),c._urlMode!==l.QUERY){if(!a){var g=document.getElementById("sample-permalink");g&&g.offsetHeight>0&&g.childNodes.length&&(a=g.childNodes[0],i=a.nodeValue)}a&&(t.href=i,je(t,s),a.nodeValue=t.href)}else o||(Oe("#sample-permalink").append('<span id="sample-permalink-lang-query"></span>'),o=Oe("#sample-permalink-lang-query")),o&&o.text((n.search(/\?/)<0?"/?lang=":"&lang=")+s);r||(r=document.getElementById("wp-admin-bar-view")),r&&r.children.length&&(r.children[0].href=e.href)},d=Oe("#title"),u=Oe("#title-prompt-text");function g(e){for(var n={},t=("?"===e[0]?e.substr(1):e).split("&"),a=0;a<t.length;a++){var i=t[a].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}return n}for(var f in s(L()),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/post",function(e){s(e),u&&d&&(d.val()?u.addClass("screen-reader-text"):u.removeClass("screen-reader-text"))}),c.languages)Oe("#wp-admin-bar-"+f+" a").on("click",function(e){e.preventDefault();var n=g(window.location.search),t=Oe(this).attr("rel");n.lang=t,window.location=window.location.origin+window.location.pathname+"?"+Oe.param(n)})}),c.isPageActive("widgets")&&wp.hooks.addAction("qtranx.load","qtranx/pages/widgets",function(){if(window.wpWidgets){jQuery(document).on("tinymce-editor-init",function(e,n){var t=Xe(n.settings.selector).parents(".widget"),a=t.find(".widget-id").val(),i="widget-"+a+"-title";t.find(".text-widget-fields input[id$='_title']").each(function(e,n){H(n,i)}),K(n,"widget-"+a+"-text")});var e=function(e,n){if("text"===n.find(".id_base").val()){var t=n.find(".widget-id").val(),a=n.find(".text-widget-fields input[id$='_title']");n.find(".widget-content input[id^='widget-text-'][id$='-title']").each(function(e,n){X(n),H(a[0],n.id)});var i=n.find(".text-widget-fields textarea[id$='_text']"),r=window.tinyMCE.get(i[0].id);n.find(".widget-content textarea[id^='widget-text-'][id$='-text']").each(function(e,t){if(X(t),r){K(r,t.id);var a=n.find(".sync-input.text");i.val(a.val()+"*")}}),t in wp.textWidgets.widgetControls&&wp.textWidgets.widgetControls[t].updateFields()}else n.find(".widget-content input[id^='widget-'][id$='-title']").each(function(e,n){X(n)});wpWidgets.appendTitle(n)};Xe(document).on("widget-added",function(n,t){e(0,t),we()}),Xe(document).on("widget-updated",e),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/widgets",function(){Xe("#widgets-right .widget").each(function(){wpWidgets.appendTitle(this)})})}}),window.qTranslateConfig.qtx=a,qTranslateConfig.js.get_qtx=function(){return wp.deprecated("qTranslateConfig.js.get_qtx",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.hooks",hint:"See release notes to use new API."}),qTranx.hooks},qTranx=n})();