var qTranx;(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{hooks:()=>n,isPageActive:()=>ye,mlExplode:()=>r,mlParseTokens:()=>s,mlSplitRaw:()=>o});var n={};e.r(n),e.d(n,{addContentHook:()=>k,addContentHookB:()=>A,addContentHookById:()=>E,addContentHookByIdB:()=>I,addContentHookByIdC:()=>B,addContentHookByIdName:()=>N,addContentHookC:()=>T,addContentHooks:()=>S,addContentHooksByClass:()=>M,addContentHooksByTagInClass:()=>H,addContentHooksTinyMCE:()=>J,addCustomContentHooks:()=>z,addDisplayHook:()=>Q,addDisplayHookAttrs:()=>V,addDisplayHookById:()=>U,addDisplayHooks:()=>W,addDisplayHooksAttrs:()=>$,addDisplayHooksByClass:()=>Y,addDisplayHooksByTagInClass:()=>K,addLanguageSwitchAfterListener:()=>ae,addLanguageSwitchBeforeListener:()=>te,addLanguageSwitchListener:()=>ee,attachContentHook:()=>C,attachEditorHook:()=>G,clickSwitchLanguage:()=>de,copyContentFrom:()=>ue,createSetOfLSB:()=>fe,createSetOfLSBwith:()=>ge,delLanguageSwitchAfterListener:()=>ie,delLanguageSwitchBeforeListener:()=>ne,enableLanguageSwitchingButtons:()=>re,getActiveLanguage:()=>_,getFlagLocation:()=>b,getLanguages:()=>x,hasContentHook:()=>L,init:()=>he,isLanguageEnabled:()=>q,loadAdditionalTinyMceHooks:()=>Z,onLoadLanguage:()=>se,refreshContentHook:()=>j,removeContentHook:()=>R,setupLanguageSwitch:()=>ve,switchActiveLanguage:()=>le,toggleCopyFrom:()=>ce});var a=function(e,t,n,a){var i=document.createElement(e);if(t)for(var r in t)i[r]=t[r];return n&&("boolean"==typeof a&&a&&(console.warn("qTranslate: deprecated boolean type in domCreateElement, will be removed in future major release."),a=n.firstChild),n.insertBefore(i,a)),i},i=window.qTranslateConfig,r=function(e){var t=o(e);return s(t)},o=function(e){var t="(\x3c!--:lang--\x3e|\x3c!--:--\x3e|\\[:lang]|\\[:]|{:lang}|{:})".replace(/lang/g,i.lang_code_format),n=new RegExp(t,"gi");return e.split(n)},s=function(e){var t=new Object;for(var n in i.language_config)t[n]="";if(!e||!e.length)return t;if(1===e.length){var a=e[0];for(var r in i.language_config)t[r]+=a;return t}for(var o,s=new RegExp("\x3c!--:(lang)--\x3e".replace(/lang/g,i.lang_code_format),"gi"),l=new RegExp("\\[:(lang)]".replace(/lang/g,i.lang_code_format),"gi"),d=new RegExp("{:(lang)}".replace(/lang/g,i.lang_code_format),"gi"),c=!1,u=0;u<e.length;++u){var g=e[u];if(g.length)if(o=s.exec(g),s.lastIndex=0,null==o)if(o=l.exec(g),l.lastIndex=0,null==o)if(o=d.exec(g),d.lastIndex=0,null==o)if("\x3c!--:--\x3e"!==g&&"[:]"!==g&&"{:}"!==g)if(c)t[c]?t[c]+=g:t[c]=g,c=!1;else for(var f in t)t[f]+=g;else c=!1;else c=o[1];else c=o[1];else c=o[1]}return t},l="qtranslate-xt-admin-edit-language",d=function(e){try{sessionStorage.setItem(l,e)}catch(e){console.log('Failed to store "'+l+'" with sessionStorage',e)}},c=jQuery,u=window.qTranslateConfig,g={},f=[],v=[],h=!1,m={},p=[],w=[],y=[],x=function(){return u.language_config},b=function(){return u.flag_location},q=function(e){return!!u.language_config[e]},_=function(){return u.activeLanguage},L=function(e){return g[e]},C=function(e,t){var n=g[t||e.id];n&&(e.classList.add("qtranxs-translatable"),n.contentField=e)},k=function(e,t,n){if(!e)return!1;switch(e.tagName){case"TEXTAREA":break;case"INPUT":switch(e.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!n){if(!e.name)return console.error("Missing name in field",e),!1;n=e.name}if(e.id){if(g[e.id]){if(c.contains(document,e))return g[e.id];console.warn("No input field with id=",e.id),R(e)}}else if(g[n]){var i=0;do{++i,e.id=n+i}while(g[e.id])}else e.id=n;var o,s,l,d=g[e.id]={};if(d.name=n,d.lang=u.activeLanguage,C(e),t)switch(t){case"slug":o="qtranslate-slugs[";break;case"term":o="qtranslate-terms[";break;default:o="qtranslate-fields["}else t="[",o="qtranslate-fields[";d.encode=t;var f=d.name.indexOf("[");if(f<0)s=o+d.name+"]";else if(s=o+d.name.substring(0,f)+"]",d.name.lastIndexOf("[]")<0)s+=d.name.substring(f);else{var v=d.name.length-2;v>f&&(s+=d.name.substring(f,v)),l="[]"}var h=c(e).attr("form"),m=void 0!==h?c("#"+h):c(e).closest("form");if(m.length){var p,w=m[0];if(d.fields={},!u.RAW){for(var y in p=r(e.value),e.value=p[d.lang],p){var x=p[y],b=s+"["+y+"]";l&&(b+=l);var q=a("input",{name:b,type:"hidden",className:"hidden",value:x},e.parentNode,e);void 0!==h&&c(q).attr("form",h),d.fields[y]=q}m.find('input[name="qtranslate-edit-language"]').length||a("input",{type:"hidden",name:"qtranslate-edit-language",value:u.activeLanguage},w,w.firstChild)}switch(t){case"slug":case"term":u.RAW&&(p=r(e.value)),d.sepfield=a("input",{name:s+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:p[u.default_language]},e.parentNode,e);break;default:u.RAW||(d.sepfield=a("input",{name:s+"[qtranslate-separator]",type:"hidden",className:"hidden",value:t},e.parentNode,e))}return d.sepfield&&void 0!==h&&c(d.sepfield).attr("form",h),d}console.error("No form found for translatable field id=",e.id)},T=function(e){return k(e,"[")},A=function(e){return k(e,"[")},E=function(e,t,n){return k(document.getElementById(e),t,n)},N=function(e){var t;switch(e[0]){case"<":case"[":t=e.substring(0,1),e=e.substring(1)}return E(e,t)},B=function(e){return E(e,"[")},I=function(e){return E(e,"[")},S=function(e,t,n){for(var a=0;a<e.length;++a){var i=e[a];k(i,t,n)}},M=function(e,t){var n;0!==e.indexOf("<")&&0!==e.indexOf("[")||(n=e.substring(0,1),e=e.substring(1)),function(e,t,n){t||(t=document);var a=t.getElementsByClassName(e);S(a,n)}(e,t,n)},H=function(e,t,n){for(var a=n.getElementsByClassName(e),i=0;i<a.length;++i){var r=a[i].getElementsByTagName(t);S(r)}},R=function(e){if(!e||!e.id)return!1;var t=g[e.id];if(!t)return!1;for(var n in t.sepfield&&c(t.sepfield).remove(),t.fields){var a=t.fields[n];c(a).remove()}if(t.mce){var i=t.mce;i.getContentAreaContainer().classList.remove("qtranxs-translatable"),i.getElement().classList.remove("qtranxs-translatable")}return t.contentField.classList.remove("qtranxs-translatable"),delete g[e.id],e.classList.remove("qtranxs-translatable"),!0},j=function(e){return R(e),k(e)},O=function(e){if(e[u.language])return"("+u.language+") "+e[u.language];if(e[u.default_language])return"("+u.default_language+") "+e[u.default_language];for(var t in e)if(e[t])return"("+t+") "+e[t];return""},F=function(e){var t=null;for(var n in e)e[n]||(t||(t=O(e)),e[n]=t)},P=function(e){if(!e.nodeValue)return 0;var t=o(e.nodeValue);if(!t||!t.length||1===t.length)return 0;var n={};return n.nd=e,n.contents=s(t),F(n.contents),e.nodeValue=n.contents[u.activeLanguage],f.push(n),1},X=function(e,t){if(!e.hasAttribute(t))return 0;var n=e.getAttribute(t),a=o(n);if(!a||!a.length||1===a.length)return 0;var i={};return i.nd=e,i.attr=t,i.contents=s(a),F(i.contents),e.setAttribute(t,i.contents[u.activeLanguage]),v.push(i),1},Q=function(e){if(!e||!e.tagName)return 0;switch(e.tagName){case"TEXTAREA":return 0;case"INPUT":return"submit"===e.type&&e.value?X(e,"value"):0}var t=0;if(e.childNodes&&e.childNodes.length)for(var n=0;n<e.childNodes.length;++n){var a=e.childNodes[n];switch(a.nodeType){case 1:t+=Q(a);break;case 2:case 3:t+=P(a)}}return t},U=function(e){return Q(document.getElementById(e))},D=function(e){var t=e.contentField.value;e.mce.settings.wpautop&&window.switchEditors&&(t=window.switchEditors.wpautop(t)),e.mce.setContent(t)},W=function(e){for(var t=0;t<e.length;++t){var n=e[t];Q(n)}},V=function(e,t){for(var n=0;n<t.length;++n){var a=t[n];X(e,a)}},$=function(e,t){for(var n=0;n<e.length;++n){var a=e[n];V(a,t)}},Y=function(e,t){var n=t.getElementsByClassName(e);W(n)},K=function(e,t,n){for(var a=n.getElementsByClassName(e),i=0;i<a.length;++i){var r=a[i].getElementsByTagName(t);W(r)}},z=function(){for(var e=0;e<u.custom_fields.length;++e){var t=u.custom_fields[e];N(t)}for(var n=0;n<u.custom_field_classes.length;++n){var a=u.custom_field_classes[n];M(a)}J()},G=function(e,t){if(!e.id)return null;t||(t=e.id);var n=g[t];return n?(t!==e.id&&(n.contentField=document.getElementById(e.id)),n.mce||(n.mce=e,e.getContentAreaContainer().classList.add("qtranxs-translatable"),e.getElement().classList.add("qtranxs-translatable")),n):null},J=function(){if(window.tinyMCEPreInit&&!u.RAW)for(var e in g){var t=g[e];"TEXTAREA"!==t.contentField.tagName||t.mce||t.mceInit||!tinyMCEPreInit.mceInit[e]||(t.mceInit=tinyMCEPreInit.mceInit[e],tinyMCEPreInit.mceInit[e].init_instance_callback=function(e){G(e)})}},Z=function(){window.tinyMCE&&tinyMCE.get().forEach(function(e){G(e)})},ee=function(e){wp.deprecated("addLanguageSwitchListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitch", ...)'}),p.push(e)},te=function(e){wp.deprecated("addLanguageSwitchBeforeListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitchPre", ...)'}),y.push(e)},ne=function(e){wp.deprecated("delLanguageSwitchBeforeListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.removeAction("qtranx.LanguageSwitchPre", ...)'});for(var t=0;t<y.length;++t)if(y[t]===e)return void y.splice(t,1)},ae=function(e){wp.deprecated("addLanguageSwitchAfterListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.addAction("qtranx.LanguageSwitch", ...)'}),w.push(e)},ie=function(e){wp.deprecated("delLanguageSwitchAfterListener",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:'wp.hooks.removeAction("qtranx.LanguageSwitch", ...)'});for(var t=0;t<w.length;++t)if(w[t]===e)return void w.splice(t,1)},re=function(e){var t=e?"block":"none";for(var n in m){for(var a=m[n],i=0;i<a.length;++i){a[i].parentElement.style.display=t;break}break}},oe=function(){for(var e=document.getElementsByClassName("wrap"),t=0;t<e.length;++t){var n=e[t].getElementsByTagName("form");if(n.length)return n[0]}var a=document.getElementsByTagName("form");if(1===a.length)return a[0];for(var i=0;i<a.length;++i){var r=a[i];if(r.getElementsByClassName("wrap").length)return r}return null},se=function(e,t){for(var n=0;n<w.length;++n)w[n].call(qTranx.hooks,e,t)},le=function(e){if(u.activeLanguage!==e){if(u.activeLanguage){wp.hooks.doAction("qtranx.languageSwitchPre",e,u.activeLanguage);for(var t=!0,n=0;n<y.length;++n)!1===y[n].call(qTranx.hooks,u.activeLanguage,e)&&(t=!1);if(!t)return;for(var a=m[u.activeLanguage],i=0;i<a.length;++i)a[i].classList.remove(u.lsb_style_active_class),c(a[i]).find(".button").removeClass("active")}var r=u.activeLanguage;u.activeLanguage=e,c('input[name="qtranslate-edit-language"]').val(e);for(var l=m[u.activeLanguage],h=0;h<l.length;++h)l[h].classList.add(u.lsb_style_active_class),c(l[h]).find(".button").addClass("active");!function(e){d(e);for(var t=f.length;--t>=0;){var n=f[t];n.nd.parentNode?n.nd.nodeValue=n.contents[e]:f.splice(t,1)}for(var a=v.length;--a>=0;){var i=v[a];i.nd.parentNode?i.nd.setAttribute(i.attr,i.contents[e]):v.splice(a,1)}if(!u.RAW)for(var r in g){var l=g[r],h=l.mce&&!l.mce.hidden;h&&l.mce.save();var m=l.contentField.value.trim(),p=o(m);if(!p||p.length<=1){l.fields[l.lang].value=m,l.lang=e;var w=l.fields[l.lang].value;l.contentField.placeholder&&""!==w&&(l.contentField.placeholder=""),l.contentField.value=w,c(l.contentField).trigger("change"),h&&D(l)}else{var y=s(p);for(var x in l.fields)l.fields[x].value=y[x];l.lang=e}}}(e);for(var w=0;w<p.length;++w)p[w].call(qTranx.hooks,e,r);wp.hooks.doAction("qtranx.languageSwitch",e,r),se(e,r)}},de=function(){var e=c(this).hasClass("button")?this.parentNode:this,t=e.lang;t?c(".qtranxs-lang-switch-wrap").hasClass("copying")?(ue(t),c(e).find(".button").blur(),c(".qtranxs-lang-switch-wrap").removeClass("copying"),c(".qtranxs-lang-copy .button").removeClass("active")):le(t):alert("qTranslate-XT: This should not have happened: Please, report this incident to the developers: !lang")},ce=function(){c(".qtranxs-lang-switch-wrap").toggleClass("copying"),c(".qtranxs-lang-copy .button").toggleClass("active"),c(".qtranxs-lang-switch-wrap").hasClass("copying")?c(".qtranxs-lang-switch").each(function(){c(this).attr("orig-title",c(this).attr("title")),c(this).attr("lang")===u.activeLanguage?c(this).attr("title",u.strings.CopyFromAlt):c(this).attr("title",u.strings.CopyFrom+" [:"+c(this).attr("lang")+"]")}):c(".qtranxs-lang-switch").each(function(){c(this).attr("title",c(this).attr("orig-title"))})},ue=function(e){var t=u.activeLanguage,n=!1;for(var a in g){var i=g[a],r=i.mce&&!i.mce.hidden,o=r?i.mce.getContent():i.contentField.value;o||(o=i.fields[e].value)&&(i.contentField.value=o,r&&D(i),n=!0)}n&&se(t,e)},ge=function(e){var t=a("ul",{className:"qtranxs-lang-switch-wrap "+e}),n=u.language_config;for(var i in n){var r=n[i],o=u.flag_location,s=u.strings.ShowIn+r.admin_name+" [:"+i+"]",l=a("li",{lang:i,className:"qtranxs-lang-switch qtranxs-lang-switch-"+i,title:s,onclick:de},t),d=l;"button"===u.lsb_style_subitem&&(d=a("button",{className:"button button-secondary",type:"button"},l)),a("img",{src:o+r.flag},d),a("span",{innerHTML:r.name},d),u.activeLanguage===i&&(l.classList.add(u.lsb_style_active_class),c(l).find(".button").addClass("active")),m[i]||(m[i]=[]),m[i].push(l)}if(!u.hide_lsb_copy_content){var g=a("li",{className:"qtranxs-lang-copy"},t),f=a("button",{className:"button button-secondary",type:"button",title:u.strings.CopyFromAlt,onclick:ce},g);a("span",{innerHTML:u.strings.CopyFrom},f)}return t},fe=function(){return ge(u.lsb_style_wrap_class+" widefat")},ve=function(){!h&&u.LSB&&(f.length||v.length||Object.keys(g).length)&&(function(){var e=document.getElementById("qtranxs-meta-box-lsb");if(e){var t=e.getElementsByClassName("inside");if(t.length){e.classList.add("closed"),c(e).find(".hndle").remove();var n=document.createElement("span");e.insertBefore(n,t[0]),n.classList.add("hndle","ui-sortable-handle");var a=ge(u.lsb_style_wrap_class);n.appendChild(a),c("#qtranxs-meta-box-lsb .hndle").off("click.postboxes")}}}(),function(){var e=[];if(u.page_config&&u.page_config.anchors)for(var t in u.page_config.anchors){var n=u.page_config.anchors[t],a=document.getElementById(t);if(a)e.push({target:a,where:n.where});else if(n.jquery)for(var i=c(n.jquery),r=0;r<i.length;++r){var o=i[r];e.push({target:o,where:n.where})}}if(!e.length){var s=oe();s&&e.push({target:s,where:"before"})}for(var l=0;l<e.length;++l){var d=e[l];if(!d.where||d.where.indexOf("before")>=0){var g=fe();d.target.parentNode.insertBefore(g,d.target)}if(d.where&&d.where.indexOf("after")>=0){var f=fe();d.target.parentNode.insertBefore(f,d.target.nextSibling)}if(d.where&&d.where.indexOf("first")>=0){var v=fe();d.target.insertBefore(v,d.target.firstChild)}if(d.where&&d.where.indexOf("last")>=0){var h=fe();d.target.insertBefore(h,null)}}}(),h=!0)},he=function(){u.LSB?(u.activeLanguage=sessionStorage.getItem(l),u.activeLanguage&&q(u.activeLanguage)||(u.activeLanguage=u.language,q(u.activeLanguage)?d(u.activeLanguage):u.LSB=!1)):(u.activeLanguage=u.language,d(u.activeLanguage)),u.page_config&&u.page_config.forms&&function(e){for(var t in e){var n=e[t],a=void 0;if(n.form){if(n.form.id)a=document.getElementById(n.form.id);else if(n.form.jquery)a=c(n.form.jquery);else if(n.form.name){var i=document.getElementsByName(n.form.name);i&&i.length&&(a=i[0])}}else a=document.getElementById(t);for(var r in a||(a=oe())||(a=document),n.fields){var o=n.fields[r],s=[];if(o.container_id){var l=document.getElementById(o.container_id);l&&s.push(l)}else o.container_jquery?s=c(o.container_jquery):o.container_class?s=document.getElementsByClassName(o.container_class):s.push(a);var d=o.encode;switch(d){case"none":break;case"display":if(o.jquery)for(var u=0;u<s.length;++u){var g=s[u],f=c(g).find(o.jquery);o.attrs?$(f,o.attrs):W(f)}else{var v=o.id?o.id:r,h=document.getElementById(v);o.attrs?V(h,o.attrs):Q(h)}break;default:if(o.jquery)for(var m=0;m<s.length;++m){var p=s[m],w=c(p).find(o.jquery);S(w,d,o.name)}else{var y=o.id?o.id:r;E(y,d,o.name)}}}}}(u.page_config.forms),c(".i18n-multilingual").each(function(e,t){k(t,"[")}),c(".i18n-multilingual-curly").each(function(e,t){k(t,"{")}),c(".i18n-multilingual-term").each(function(e,t){k(t,"term")}),c(".i18n-multilingual-slug").each(function(e,t){k(t,"slug")}),c(".i18n-multilingual-display").each(function(e,t){Q(t)}),J(),ve()};u.js.get_qtx=function(){return wp.deprecated("qTranslateConfig.js.get_qtx",{since:"3.16.0",version:"4.0.0",plugin:"qTranslate-XT",alternative:"qTranx.hooks",hint:"See release notes to use new API."}),qTranx.hooks};var me=jQuery,pe=window.qTranslateConfig,we=function(){var e,t;return null!==(e=null===(t=pe.page_config)||void 0===t?void 0:t.keys)&&void 0!==e?e:[]},ye=function(e){return we().indexOf(e)>=0};me(window).on("load",function(){he(),Z(),wp.hooks.doAction("qtranx.load"),we().forEach(function(e){me(document).trigger("qtxLoadAdmin:"+e,[qTranx.hooks,"Deprecated event 'qtxLoadAdmin', use wp.hooks.addAction('qtranx.load', namespace, callback) instead."])})});var xe=jQuery,be=jQuery,qe=Object.freeze({QTX_URL_QUERY:1,QTX_URL_PATH:2,QTX_URL_DOMAIN:3,QTX_URL_DOMAINS:4}),_e=jQuery;ye("edit-tags")&&wp.hooks.addAction("qtranx.load","qtranx/pages/edit-tags",function(){var e=function(e,t){Q(t)},t=function(t){var n=xe(t);n.find(".row-title, .description").each(e),n.find("td.name span.inline").css("display","none")},n=xe("#the-list"),a=xe("#the-list > tr").length,i=function(){var e=n.children();if(a===e.length)return!1;var i=a>e.length;if(a=e.length,i)return!1;for(var r=0;r<e.length;++r){var o=e[r];t(o)}return!1};n.each(function(e,t){xe(t).on("DOMSubtreeModified",i)}),xe("#the-list > tr > td.name span.inline").css("display","none")}),ye("nav-menus")&&wp.hooks.addAction("qtranx.load","qtranx/pages/nav-menus",function(){var e=function(e){M("edit-menu-item-title",e),M("edit-menu-item-attr-title",e),M("[edit-menu-item-description",e),Y("menu-item-title",e),K("link-to-original","A",e)},t=function(t){for(var n,a=/id="menu-item-(\d+)"/gi;n=a.exec(t);){var i="menu-item-"+n[1],r=document.getElementById(i);r&&e(r)}};if(wpNavMenu){var n=wpNavMenu.addMenuItemToBottom;"function"==typeof n&&(wpNavMenu.addMenuItemToBottom=function(e,a){n(e,a),t(e)}),"function"==typeof wp_addMenuItemToTop&&(wpNavMenu.addMenuItemToTop=function(e){wp_addMenuItemToTop(e),t(e)})}var a=function(e){wpNavMenu&&("function"==typeof wpNavMenu.refreshKeyboardAccessibility&&wpNavMenu.refreshKeyboardAccessibility(),"function"==typeof wpNavMenu.refreshAdvancedAccessibility&&wpNavMenu.refreshAdvancedAccessibility())};a(),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/nav-menus",a)}),ye("post")&&wp.hooks.addAction("qtranx.load","qtranx/pages/post",function(){var e,t,n,a,i,r,o,s=function(e,t){switch(qTranslateConfig.url_mode){case qe.QTX_URL_QUERY:e.search?e.search+="&lang="+t:e.search="?lang="+t;break;case qe.QTX_URL_PATH:var n=qTranslateConfig.home_url_path,a=e.pathname;"/"!==a[0]&&(a="/"+a);var i=a.indexOf(n);i>=0&&(e.pathname=qTranslateConfig.homeinfo_path+t+a.substring(i+n.length-1));break;case qe.QTX_URL_DOMAIN:e.host=t+"."+e.host;break;case qe.QTX_URL_DOMAINS:e.host=qTranslateConfig.domains[t]}},l=function(l){if(!e){var d=document.getElementById("view-post-btn");if(!d||!d.children.length)return;if("A"!==(e=d.children[0]).tagName)return;t=e.href,n=domCreateElement("a",{}),t.search(/\?/)}n.href=t,s(n,l),e.href=n.href;var c=document.getElementById("preview-action");if(c&&c.children.length&&(c.children[0].href=n.href),qTranslateConfig.url_mode!==qe.QTX_URL_QUERY){if(!a){var u=document.getElementById("sample-permalink");u&&u.offsetHeight>0&&u.childNodes.length&&(a=u.childNodes[0],i=a.nodeValue)}a&&(n.href=i,s(n,l),a.nodeValue=n.href)}else o||(be("#sample-permalink").append('<span id="sample-permalink-lang-query"></span>'),o=be("#sample-permalink-lang-query")),o&&o.text((t.search(/\?/)<0?"/?lang=":"&lang=")+l);r||(r=document.getElementById("wp-admin-bar-view")),r&&r.children.length&&(r.children[0].href=e.href)},d=be("#title"),c=be("#title-prompt-text");function u(e){for(var t={},n=("?"===e[0]?e.substr(1):e).split("&"),a=0;a<n.length;a++){var i=n[a].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}return t}for(var g in z(),l(_()),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/post",function(e){l(e),c&&d&&(d.val()?c.addClass("screen-reader-text"):c.removeClass("screen-reader-text"))}),x())be("#wp-admin-bar-"+g+" a").on("click",function(e){e.preventDefault();var t=u(window.location.search),n=be(this).attr("rel");t.lang=n,window.location=window.location.origin+window.location.pathname+"?"+be.param(t)})}),ye("widgets")&&wp.hooks.addAction("qtranx.load","qtranx/pages/widgets",function(){if(window.wpWidgets){jQuery(document).on("tinymce-editor-init",function(e,t){var n=_e(t.settings.selector).parents(".widget"),a=n.find(".widget-id").val(),i="widget-"+a+"-title";n.find(".text-widget-fields input[id$='_title']").each(function(e,t){C(t,i)}),G(t,"widget-"+a+"-text")});var e=function(e,t){if("text"===t.find(".id_base").val()){var n=t.find(".widget-id").val(),a=t.find(".text-widget-fields input[id$='_title']");t.find(".widget-content input[id^='widget-text-'][id$='-title']").each(function(e,t){j(t),C(a[0],t.id)});var i=t.find(".text-widget-fields textarea[id$='_text']"),r=window.tinyMCE.get(i[0].id);t.find(".widget-content textarea[id^='widget-text-'][id$='-text']").each(function(e,n){if(j(n),r){G(r,n.id);var a=t.find(".sync-input.text");i.val(a.val()+"*")}}),n in wp.textWidgets.widgetControls&&wp.textWidgets.widgetControls[n].updateFields()}else t.find(".widget-content input[id^='widget-'][id$='-title']").each(function(e,t){j(t)});wpWidgets.appendTitle(t)};_e(document).on("widget-added",function(t,n){e(0,n),ve()}),_e(document).on("widget-updated",e),wp.hooks.addAction("qtranx.languageSwitch","qtranx/pages/widgets",function(){_e("#widgets-right .widget").each(function(){wpWidgets.appendTitle(this)})})}}),window.qTranslateConfig.qtx=n,qTranx=t})();